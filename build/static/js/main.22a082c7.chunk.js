(this["webpackJsonptask-allocation-frontend"]=this["webpackJsonptask-allocation-frontend"]||[]).push([[0],{141:function(e,t,a){e.exports=a.p+"static/media/Homepage.7e0db706.svg"},289:function(e,t,a){e.exports=a.p+"static/media/roboto-100.66209ae0.ttf"},290:function(e,t,a){e.exports=a.p+"static/media/roboto-v20-latin-300.b00849e0.woff"},291:function(e,t,a){e.exports=a.p+"static/media/roboto-v20-latin-300.ef7c6637.woff2"},292:function(e,t,a){e.exports=a.p+"static/media/roboto-v20-latin-500.87284894.woff"},293:function(e,t,a){e.exports=a.p+"static/media/roboto-v20-latin-500.020c97dc.woff2"},294:function(e,t,a){e.exports=a.p+"static/media/roboto-v20-latin-700.adcde98f.woff"},295:function(e,t,a){e.exports=a.p+"static/media/roboto-v20-latin-700.2735a3a6.woff2"},428:function(e){e.exports=JSON.parse('{"address":"0x9dedE0Fa91030E5C4DeC465fd540581144eEe1a2","abi":[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"apiUrl","type":"string"}],"name":"ApiUrlSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"userId","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"taskId","type":"bytes32"}],"name":"TaskAccepted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"taskId","type":"bytes32"}],"name":"TaskCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"taskId","type":"bytes32"}],"name":"TaskDeleted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"entity","type":"address"}],"name":"TasksRestart","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"userId","type":"bytes32"}],"name":"UserDeleted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"userId","type":"bytes32"}],"name":"UserRegistered","type":"event"},{"inputs":[],"name":"TIME_TO_ACCEPT_TASK","outputs":[{"internalType":"uint32","name":"","type":"uint32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_userId","type":"bytes32"},{"internalType":"bytes32","name":"_taskId","type":"bytes32"}],"name":"acceptTask","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"apiUrl","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_taskId","type":"bytes32"}],"name":"createTask","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_userId","type":"bytes32"}],"name":"registerUser","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"restart","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_apiUrl","type":"string"}],"name":"setApiUrl","outputs":[],"stateMutability":"nonpayable","type":"function"}],"transactionHash":"0x4d4964a6e30fe1835666610ef7d54cde03d84895ffc4ead2355f200dc92038b5","receipt":{"to":null,"from":"0x75567c2Cfbc85344b053BB97cA3e757A53331683","contractAddress":"0x9dedE0Fa91030E5C4DeC465fd540581144eEe1a2","transactionIndex":13,"gasUsed":"975516","logsBloom":"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","blockHash":"0xbf4f7c4b54e789787200a40605e63076c633839ead5be9373bf1526b7687c641","transactionHash":"0x4d4964a6e30fe1835666610ef7d54cde03d84895ffc4ead2355f200dc92038b5","logs":[],"blockNumber":10867813,"cumulativeGasUsed":"1877807","status":1,"byzantium":true},"args":[],"solcInputHash":"00232639b1870a2f8d56428b9d51d924","metadata":"{\\"compiler\\":{\\"version\\":\\"0.8.4+commit.c7e474f2\\"},\\"language\\":\\"Solidity\\",\\"output\\":{\\"abi\\":[{\\"anonymous\\":false,\\"inputs\\":[{\\"indexed\\":false,\\"internalType\\":\\"string\\",\\"name\\":\\"apiUrl\\",\\"type\\":\\"string\\"}],\\"name\\":\\"ApiUrlSet\\",\\"type\\":\\"event\\"},{\\"anonymous\\":false,\\"inputs\\":[{\\"indexed\\":true,\\"internalType\\":\\"bytes32\\",\\"name\\":\\"userId\\",\\"type\\":\\"bytes32\\"},{\\"indexed\\":true,\\"internalType\\":\\"bytes32\\",\\"name\\":\\"taskId\\",\\"type\\":\\"bytes32\\"}],\\"name\\":\\"TaskAccepted\\",\\"type\\":\\"event\\"},{\\"anonymous\\":false,\\"inputs\\":[{\\"indexed\\":true,\\"internalType\\":\\"bytes32\\",\\"name\\":\\"taskId\\",\\"type\\":\\"bytes32\\"}],\\"name\\":\\"TaskCreated\\",\\"type\\":\\"event\\"},{\\"anonymous\\":false,\\"inputs\\":[{\\"indexed\\":true,\\"internalType\\":\\"bytes32\\",\\"name\\":\\"taskId\\",\\"type\\":\\"bytes32\\"}],\\"name\\":\\"TaskDeleted\\",\\"type\\":\\"event\\"},{\\"anonymous\\":false,\\"inputs\\":[{\\"indexed\\":true,\\"internalType\\":\\"address\\",\\"name\\":\\"entity\\",\\"type\\":\\"address\\"}],\\"name\\":\\"TasksRestart\\",\\"type\\":\\"event\\"},{\\"anonymous\\":false,\\"inputs\\":[{\\"indexed\\":true,\\"internalType\\":\\"bytes32\\",\\"name\\":\\"userId\\",\\"type\\":\\"bytes32\\"}],\\"name\\":\\"UserDeleted\\",\\"type\\":\\"event\\"},{\\"anonymous\\":false,\\"inputs\\":[{\\"indexed\\":true,\\"internalType\\":\\"bytes32\\",\\"name\\":\\"userId\\",\\"type\\":\\"bytes32\\"}],\\"name\\":\\"UserRegistered\\",\\"type\\":\\"event\\"},{\\"inputs\\":[],\\"name\\":\\"TIME_TO_ACCEPT_TASK\\",\\"outputs\\":[{\\"internalType\\":\\"uint32\\",\\"name\\":\\"\\",\\"type\\":\\"uint32\\"}],\\"stateMutability\\":\\"view\\",\\"type\\":\\"function\\"},{\\"inputs\\":[{\\"internalType\\":\\"bytes32\\",\\"name\\":\\"_userId\\",\\"type\\":\\"bytes32\\"},{\\"internalType\\":\\"bytes32\\",\\"name\\":\\"_taskId\\",\\"type\\":\\"bytes32\\"}],\\"name\\":\\"acceptTask\\",\\"outputs\\":[],\\"stateMutability\\":\\"nonpayable\\",\\"type\\":\\"function\\"},{\\"inputs\\":[],\\"name\\":\\"apiUrl\\",\\"outputs\\":[{\\"internalType\\":\\"string\\",\\"name\\":\\"\\",\\"type\\":\\"string\\"}],\\"stateMutability\\":\\"view\\",\\"type\\":\\"function\\"},{\\"inputs\\":[{\\"internalType\\":\\"bytes32\\",\\"name\\":\\"_taskId\\",\\"type\\":\\"bytes32\\"}],\\"name\\":\\"createTask\\",\\"outputs\\":[],\\"stateMutability\\":\\"nonpayable\\",\\"type\\":\\"function\\"},{\\"inputs\\":[{\\"internalType\\":\\"bytes32\\",\\"name\\":\\"_userId\\",\\"type\\":\\"bytes32\\"}],\\"name\\":\\"registerUser\\",\\"outputs\\":[],\\"stateMutability\\":\\"nonpayable\\",\\"type\\":\\"function\\"},{\\"inputs\\":[],\\"name\\":\\"restart\\",\\"outputs\\":[],\\"stateMutability\\":\\"nonpayable\\",\\"type\\":\\"function\\"},{\\"inputs\\":[{\\"internalType\\":\\"string\\",\\"name\\":\\"_apiUrl\\",\\"type\\":\\"string\\"}],\\"name\\":\\"setApiUrl\\",\\"outputs\\":[],\\"stateMutability\\":\\"nonpayable\\",\\"type\\":\\"function\\"}],\\"devdoc\\":{\\"kind\\":\\"dev\\",\\"methods\\":{\\"createTask(bytes32)\\":{\\"params\\":{\\"_taskId\\":\\"The task\'s id.\\"}}},\\"version\\":1},\\"userdoc\\":{\\"events\\":{\\"TaskCreated(bytes32)\\":{\\"notice\\":\\"Events\\"},\\"TasksRestart(address)\\":{\\"notice\\":\\"Events\\"}},\\"kind\\":\\"user\\",\\"methods\\":{\\"apiUrl()\\":{\\"notice\\":\\"State\\"},\\"createTask(bytes32)\\":{\\"notice\\":\\"Create a new task.\\"},\\"setApiUrl(string)\\":{\\"notice\\":\\"ACL\\"}},\\"version\\":1}},\\"settings\\":{\\"compilationTarget\\":{\\"contracts/allocation-models/FCFSTAA.sol\\":\\"FCFSTAA\\"},\\"evmVersion\\":\\"istanbul\\",\\"libraries\\":{},\\"metadata\\":{\\"bytecodeHash\\":\\"ipfs\\",\\"useLiteralContent\\":true},\\"optimizer\\":{\\"enabled\\":false,\\"runs\\":200},\\"remappings\\":[]},\\"sources\\":{\\"@openzeppelin/contracts/utils/math/SafeMath.sol\\":{\\"content\\":\\"// SPDX-License-Identifier: MIT\\\\n// OpenZeppelin Contracts (last updated v4.6.0) (utils/math/SafeMath.sol)\\\\n\\\\npragma solidity ^0.8.0;\\\\n\\\\n// CAUTION\\\\n// This version of SafeMath should only be used with Solidity 0.8 or later,\\\\n// because it relies on the compiler\'s built in overflow checks.\\\\n\\\\n/**\\\\n * @dev Wrappers over Solidity\'s arithmetic operations.\\\\n *\\\\n * NOTE: `SafeMath` is generally not needed starting with Solidity 0.8, since the compiler\\\\n * now has built in overflow checking.\\\\n */\\\\nlibrary SafeMath {\\\\n    /**\\\\n     * @dev Returns the addition of two unsigned integers, with an overflow flag.\\\\n     *\\\\n     * _Available since v3.4._\\\\n     */\\\\n    function tryAdd(uint256 a, uint256 b) internal pure returns (bool, uint256) {\\\\n        unchecked {\\\\n            uint256 c = a + b;\\\\n            if (c < a) return (false, 0);\\\\n            return (true, c);\\\\n        }\\\\n    }\\\\n\\\\n    /**\\\\n     * @dev Returns the subtraction of two unsigned integers, with an overflow flag.\\\\n     *\\\\n     * _Available since v3.4._\\\\n     */\\\\n    function trySub(uint256 a, uint256 b) internal pure returns (bool, uint256) {\\\\n        unchecked {\\\\n            if (b > a) return (false, 0);\\\\n            return (true, a - b);\\\\n        }\\\\n    }\\\\n\\\\n    /**\\\\n     * @dev Returns the multiplication of two unsigned integers, with an overflow flag.\\\\n     *\\\\n     * _Available since v3.4._\\\\n     */\\\\n    function tryMul(uint256 a, uint256 b) internal pure returns (bool, uint256) {\\\\n        unchecked {\\\\n            // Gas optimization: this is cheaper than requiring \'a\' not being zero, but the\\\\n            // benefit is lost if \'b\' is also tested.\\\\n            // See: https://github.com/OpenZeppelin/openzeppelin-contracts/pull/522\\\\n            if (a == 0) return (true, 0);\\\\n            uint256 c = a * b;\\\\n            if (c / a != b) return (false, 0);\\\\n            return (true, c);\\\\n        }\\\\n    }\\\\n\\\\n    /**\\\\n     * @dev Returns the division of two unsigned integers, with a division by zero flag.\\\\n     *\\\\n     * _Available since v3.4._\\\\n     */\\\\n    function tryDiv(uint256 a, uint256 b) internal pure returns (bool, uint256) {\\\\n        unchecked {\\\\n            if (b == 0) return (false, 0);\\\\n            return (true, a / b);\\\\n        }\\\\n    }\\\\n\\\\n    /**\\\\n     * @dev Returns the remainder of dividing two unsigned integers, with a division by zero flag.\\\\n     *\\\\n     * _Available since v3.4._\\\\n     */\\\\n    function tryMod(uint256 a, uint256 b) internal pure returns (bool, uint256) {\\\\n        unchecked {\\\\n            if (b == 0) return (false, 0);\\\\n            return (true, a % b);\\\\n        }\\\\n    }\\\\n\\\\n    /**\\\\n     * @dev Returns the addition of two unsigned integers, reverting on\\\\n     * overflow.\\\\n     *\\\\n     * Counterpart to Solidity\'s `+` operator.\\\\n     *\\\\n     * Requirements:\\\\n     *\\\\n     * - Addition cannot overflow.\\\\n     */\\\\n    function add(uint256 a, uint256 b) internal pure returns (uint256) {\\\\n        return a + b;\\\\n    }\\\\n\\\\n    /**\\\\n     * @dev Returns the subtraction of two unsigned integers, reverting on\\\\n     * overflow (when the result is negative).\\\\n     *\\\\n     * Counterpart to Solidity\'s `-` operator.\\\\n     *\\\\n     * Requirements:\\\\n     *\\\\n     * - Subtraction cannot overflow.\\\\n     */\\\\n    function sub(uint256 a, uint256 b) internal pure returns (uint256) {\\\\n        return a - b;\\\\n    }\\\\n\\\\n    /**\\\\n     * @dev Returns the multiplication of two unsigned integers, reverting on\\\\n     * overflow.\\\\n     *\\\\n     * Counterpart to Solidity\'s `*` operator.\\\\n     *\\\\n     * Requirements:\\\\n     *\\\\n     * - Multiplication cannot overflow.\\\\n     */\\\\n    function mul(uint256 a, uint256 b) internal pure returns (uint256) {\\\\n        return a * b;\\\\n    }\\\\n\\\\n    /**\\\\n     * @dev Returns the integer division of two unsigned integers, reverting on\\\\n     * division by zero. The result is rounded towards zero.\\\\n     *\\\\n     * Counterpart to Solidity\'s `/` operator.\\\\n     *\\\\n     * Requirements:\\\\n     *\\\\n     * - The divisor cannot be zero.\\\\n     */\\\\n    function div(uint256 a, uint256 b) internal pure returns (uint256) {\\\\n        return a / b;\\\\n    }\\\\n\\\\n    /**\\\\n     * @dev Returns the remainder of dividing two unsigned integers. (unsigned integer modulo),\\\\n     * reverting when dividing by zero.\\\\n     *\\\\n     * Counterpart to Solidity\'s `%` operator. This function uses a `revert`\\\\n     * opcode (which leaves remaining gas untouched) while Solidity uses an\\\\n     * invalid opcode to revert (consuming all remaining gas).\\\\n     *\\\\n     * Requirements:\\\\n     *\\\\n     * - The divisor cannot be zero.\\\\n     */\\\\n    function mod(uint256 a, uint256 b) internal pure returns (uint256) {\\\\n        return a % b;\\\\n    }\\\\n\\\\n    /**\\\\n     * @dev Returns the subtraction of two unsigned integers, reverting with custom message on\\\\n     * overflow (when the result is negative).\\\\n     *\\\\n     * CAUTION: This function is deprecated because it requires allocating memory for the error\\\\n     * message unnecessarily. For custom revert reasons use {trySub}.\\\\n     *\\\\n     * Counterpart to Solidity\'s `-` operator.\\\\n     *\\\\n     * Requirements:\\\\n     *\\\\n     * - Subtraction cannot overflow.\\\\n     */\\\\n    function sub(\\\\n        uint256 a,\\\\n        uint256 b,\\\\n        string memory errorMessage\\\\n    ) internal pure returns (uint256) {\\\\n        unchecked {\\\\n            require(b <= a, errorMessage);\\\\n            return a - b;\\\\n        }\\\\n    }\\\\n\\\\n    /**\\\\n     * @dev Returns the integer division of two unsigned integers, reverting with custom message on\\\\n     * division by zero. The result is rounded towards zero.\\\\n     *\\\\n     * Counterpart to Solidity\'s `/` operator. Note: this function uses a\\\\n     * `revert` opcode (which leaves remaining gas untouched) while Solidity\\\\n     * uses an invalid opcode to revert (consuming all remaining gas).\\\\n     *\\\\n     * Requirements:\\\\n     *\\\\n     * - The divisor cannot be zero.\\\\n     */\\\\n    function div(\\\\n        uint256 a,\\\\n        uint256 b,\\\\n        string memory errorMessage\\\\n    ) internal pure returns (uint256) {\\\\n        unchecked {\\\\n            require(b > 0, errorMessage);\\\\n            return a / b;\\\\n        }\\\\n    }\\\\n\\\\n    /**\\\\n     * @dev Returns the remainder of dividing two unsigned integers. (unsigned integer modulo),\\\\n     * reverting with custom message when dividing by zero.\\\\n     *\\\\n     * CAUTION: This function is deprecated because it requires allocating memory for the error\\\\n     * message unnecessarily. For custom revert reasons use {tryMod}.\\\\n     *\\\\n     * Counterpart to Solidity\'s `%` operator. This function uses a `revert`\\\\n     * opcode (which leaves remaining gas untouched) while Solidity uses an\\\\n     * invalid opcode to revert (consuming all remaining gas).\\\\n     *\\\\n     * Requirements:\\\\n     *\\\\n     * - The divisor cannot be zero.\\\\n     */\\\\n    function mod(\\\\n        uint256 a,\\\\n        uint256 b,\\\\n        string memory errorMessage\\\\n    ) internal pure returns (uint256) {\\\\n        unchecked {\\\\n            require(b > 0, errorMessage);\\\\n            return a % b;\\\\n        }\\\\n    }\\\\n}\\\\n\\",\\"keccak256\\":\\"0x0f633a0223d9a1dcccfcf38a64c9de0874dfcbfac0c6941ccf074d63a2ce0e1e\\",\\"license\\":\\"MIT\\"},\\"contracts/BaseTaskAllocation.sol\\":{\\"content\\":\\"pragma solidity ^0.8.4;\\\\n\\\\nabstract contract BaseTaskAllocation {\\\\n    /// Events\\\\n    event TasksRestart(address indexed entity);\\\\n    event ApiUrlSet(string apiUrl);\\\\n\\\\n    /// State\\\\n    string public apiUrl;\\\\n\\\\n    /// ACL\\\\n    // bytes32 constant public ALLOCATE_TASK_ROLE = keccak256(\\\\\\"ALLOCATE_TASK_ROLE\\\\\\");\\\\n    // bytes32 constant public GET_TASK_ROLE = keccak256(\\\\\\"GET_TASK_ROLE\\\\\\");\\\\n    // bytes32 constant public CREATE_TASK_ROLE = keccak256(\\\\\\"CREATE_TASK_ROLE\\\\\\");\\\\n    // bytes32 constant public CREATE_USER_ROLE = keccak256(\\\\\\"CREATE_USER_ROLE\\\\\\");\\\\n    // bytes32 constant public RESTART_APP_ROLE = keccak256(\\\\\\"RESTART_APP_ROLE\\\\\\");\\\\n\\\\n    function setApiUrl(string calldata _apiUrl) external {\\\\n        apiUrl = _apiUrl;\\\\n        emit ApiUrlSet(_apiUrl);\\\\n    }\\\\n\\\\n    function restart() virtual external {}\\\\n}\\\\n\\",\\"keccak256\\":\\"0xc7c99e3cfbf831bd8864e10ba0f4510c52675bff7809e6e5bb7249c6f6ee5ec0\\"},\\"contracts/allocation-models/FCFSTAA.sol\\":{\\"content\\":\\"pragma solidity ^0.8.4;\\\\n\\\\nimport \\\\\\"@openzeppelin/contracts/utils/math/SafeMath.sol\\\\\\";\\\\n\\\\nimport \\\\\\"../BaseTaskAllocation.sol\\\\\\";\\\\n\\\\n// Round Robin Task Allocation App\\\\ncontract FCFSTAA is BaseTaskAllocation {\\\\n\\\\n    using SafeMath for uint256;\\\\n\\\\n    /// Events\\\\n    event TaskCreated(bytes32 indexed taskId);\\\\n    event TaskDeleted(bytes32 indexed taskId);\\\\n    event TaskAccepted(bytes32 indexed userId, bytes32 indexed taskId);\\\\n    event UserRegistered(bytes32 indexed userId);\\\\n    event UserDeleted(bytes32 indexed userId);\\\\n\\\\n    /// Task statuses\\\\n    enum Status {\\\\n        NonExistent,\\\\n        Available,\\\\n        Accepted,\\\\n        Completed\\\\n    }\\\\n\\\\n    mapping(bytes32 => Task) tasks;\\\\n\\\\n    // List of task ids used for restarting purposes\\\\n    bytes32[] taskIds;\\\\n\\\\n    mapping(bytes32 => User) users;\\\\n\\\\n    //Need it to transvers users array more gracefuly. \\\\n    mapping(uint256 => bytes32) private userIndexToId;\\\\n    uint256 private numberOfUsers;\\\\n\\\\n    //To keep record of user\'s assignments and control that users can only \\\\n    // have 1 task accepted\\\\n    /*\\\\n     * Key: userId\\\\n     */\\\\n    mapping(bytes32 => bool) userTaskRegistry;\\\\n\\\\n    struct User {\\\\n        uint256 index;\\\\n        bool exists; // Check if the user exists in the mapping\\\\n    }\\\\n\\\\n    struct Task {\\\\n        uint256 userIndex;\\\\n        uint256 endDate; // When the task should be removed\\\\n        Status status; // Take one of the statuses value\\\\n    }\\\\n\\\\n    uint32 constant public TIME_TO_ACCEPT_TASK = 259200; // 3 days \\\\n\\\\n    ///Errors\\\\n    string private constant ERROR_USER_HAS_TASK = \\\\\\"USER_HAS_TASK\\\\\\";\\\\n    string private constant ERROR_USER_ALREADY_EXISTS = \\\\\\"USER_ALREADY_EXISTS\\\\\\";\\\\n    string private constant ERROR_USER_DONT_EXIST = \\\\\\"USER_DONT_EXIST\\\\\\";\\\\n    string private constant ERROR_TASK_EXISTS = \\\\\\"TASK_EXISTS\\\\\\";\\\\n    string private constant ERROR_TASK_DONT_EXIST = \\\\\\"TASK_DONT_EXIST\\\\\\";\\\\n    string private constant ERROR_TASK_ALLOCATION = \\\\\\"TASK_ALLOCATION_FAIL\\\\\\";\\\\n    string private constant ERROR_TASK_NOT_AVAILABLE = \\\\\\"TASK_NOT_AVAILABLE\\\\\\";\\\\n\\\\n    // Verification functions\\\\n    modifier userHasNoTask(bytes32 _userId) {\\\\n        require(!userTaskRegistry[_userId], ERROR_USER_HAS_TASK);\\\\n        _;\\\\n    }\\\\n    modifier userDontExist(bytes32 _userId) {\\\\n        require(!users[_userId].exists, ERROR_USER_ALREADY_EXISTS);\\\\n        _;\\\\n    }\\\\n    modifier userExists(bytes32 _userId) {\\\\n        require(users[_userId].exists, ERROR_USER_DONT_EXIST);\\\\n        _;\\\\n    }\\\\n    modifier taskDontExist(bytes32 _taskId) {\\\\n        require(tasks[_taskId].status == Status.NonExistent, ERROR_TASK_EXISTS);\\\\n        _;\\\\n    }\\\\n    modifier taskExists(bytes32 _taskId) {\\\\n        require(tasks[_taskId].status != Status.NonExistent, ERROR_TASK_DONT_EXIST);\\\\n        _;\\\\n    }\\\\n    modifier taskAvailable(bytes32 _taskId) {\\\\n        Task storage task = tasks[_taskId];\\\\n        require(task.status == Status.Available, ERROR_TASK_NOT_AVAILABLE);\\\\n        _;\\\\n    }\\\\n\\\\n    // Function used to register users\\\\n    function registerUser(bytes32 _userId)\\\\n    external\\\\n    userDontExist(_userId)\\\\n    {\\\\n        userIndexToId[numberOfUsers] = _userId;\\\\n        users[_userId].index = numberOfUsers;\\\\n        users[_userId].exists = true;\\\\n\\\\n        numberOfUsers = numberOfUsers.add(1);\\\\n\\\\n        emit UserRegistered(_userId);\\\\n    }\\\\n\\\\n    /**\\\\n     * @notice Create a new task.\\\\n     * @param _taskId The task\'s id.\\\\n     */\\\\n    function createTask(\\\\n        bytes32 _taskId\\\\n    )\\\\n    external\\\\n    taskDontExist(_taskId)\\\\n    {\\\\n        Task storage task = tasks[_taskId];\\\\n        task.userIndex = 0;\\\\n        task.endDate = block.timestamp.add(TIME_TO_ACCEPT_TASK);\\\\n        task.status = Status.Available;\\\\n\\\\n        taskIds.push(_taskId);\\\\n        emit TaskCreated(_taskId);\\\\n    }\\\\n\\\\n    // TODO \\\\n    // Fucntion that removes the task once the endDate time has expired\\\\n    // function removeTask(\\\\n    //     bytes32 _taskId\\\\n    // )\\\\n    // public\\\\n    // taskExists(_taskId)\\\\n    // {\\\\n        \\\\n    // }\\\\n\\\\n    // Function called when a user accepts a task\\\\n    function acceptTask(\\\\n        bytes32 _userId,\\\\n        bytes32 _taskId\\\\n    )\\\\n    external\\\\n    userExists(_userId)\\\\n    taskExists(_taskId)\\\\n    taskAvailable(_taskId)\\\\n    userHasNoTask(_userId)\\\\n    {\\\\n        userTaskRegistry[_userId] = true;\\\\n\\\\n        tasks[_taskId].status = Status.Accepted;\\\\n        tasks[_taskId].userIndex = users[_userId].index;\\\\n        \\\\n        emit TaskAccepted(_userId, _taskId);\\\\n    }\\\\n\\\\n\\\\n     // Function used to clean up the contract\\\\n    function restart() override external {\\\\n         // Remove tasks\\\\n        for (uint i = 0; i < taskIds.length; i++) {\\\\n            bytes32 tId = taskIds[i];\\\\n            Task storage task = tasks[tId];\\\\n\\\\n            // Set the status of the task to non-existent\\\\n            task.status = Status.NonExistent;\\\\n\\\\n            // Emit an event indicating that task has been deleted\\\\n            emit TaskDeleted(tId);\\\\n        }\\\\n\\\\n        // Remove users\\\\n        for (uint k = 0; k < numberOfUsers; k++) {\\\\n            bytes32 uId = userIndexToId[k];\\\\n            User storage user = users[uId];\\\\n            user.exists = false;\\\\n\\\\n            userTaskRegistry[uId] = false;\\\\n\\\\n            emit UserDeleted(uId);\\\\n        }\\\\n\\\\n        delete taskIds;\\\\n\\\\n        numberOfUsers = 0;\\\\n\\\\n        emit TasksRestart(msg.sender);\\\\n    }\\\\n\\\\n}\\\\n\\",\\"keccak256\\":\\"0x070a1880f2bec7fe0b775a391167247231696cb426077ba7c2107ce5bca4ca1a\\"}},\\"version\\":1}","bytecode":"0x608060405234801561001057600080fd5b506110d5806100206000396000f3fe608060405234801561001057600080fd5b506004361061007d5760003560e01c80634988a5691161005b5780634988a569146100c65780638367e120146100e2578063b293e81c14610100578063e8c75a301461011c5761007d565b806303f33ef2146100825780631ef3755d146100a05780632dc03259146100aa575b600080fd5b61008a610138565b6040516100979190610eab565b60405180910390f35b6100a861013f565b005b6100c460048036038101906100bf9190610d46565b610368565b005b6100e060048036038101906100db9190610d6f565b6104b9565b005b6100ea610910565b6040516100f79190610e89565b60405180910390f35b61011a60048036038101906101159190610d46565b61099e565b005b61013660048036038101906101319190610dab565b610ba1565b005b6203f48081565b60005b6002805490508110156102445760006002828154811061018b577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b90600052602060002001549050600060016000838152602001908152602001600020905060008160020160006101000a81548160ff021916908360038111156101fd577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b0217905550817fa96209878fc4722b56527db6cf4b72ad6bfddb3ad9968f7de1125d02acc9aa1060405160405180910390a25050808061023c90610fd0565b915050610142565b5060005b60055481101561030c57600060046000838152602001908152602001600020549050600060036000838152602001908152602001600020905060008160010160006101000a81548160ff02191690831515021790555060006006600084815260200190815260200160002060006101000a81548160ff021916908315150217905550817fc26eb30613e535870aeacfc24e58a8fb60e992f0d8bfe04ec9c98db26b53c5e560405160405180910390a25050808061030490610fd0565b915050610248565b506002600061031b9190610c06565b60006005819055503373ffffffffffffffffffffffffffffffffffffffff167f27563bd9f3c446b90907219bff4dda76f7ca7ede071560f5856f9848e04048b160405160405180910390a2565b806003600082815260200190815260200160002060010160009054906101000a900460ff16156040518060400160405280601381526020017f555345525f414c52454144595f4558495354530000000000000000000000000081525090610405576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016103fc9190610e89565b60405180910390fd5b508160046000600554815260200190815260200160002081905550600554600360008481526020019081526020016000206000018190555060016003600084815260200190815260200160002060010160006101000a81548160ff0219169083151502179055506104826001600554610bf090919063ffffffff16565b600581905550817f78997021e09413de1e36500ed07f9f6c73541162817fc3ea6a115e5e3d3affb960405160405180910390a25050565b816003600082815260200190815260200160002060010160009054906101000a900460ff166040518060400160405280600f81526020017f555345525f444f4e545f4558495354000000000000000000000000000000000081525090610555576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161054c9190610e89565b60405180910390fd5b508160006003811115610591577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b6001600083815260200190815260200160002060020160009054906101000a900460ff1660038111156105ed577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b14156040518060400160405280600f81526020017f5441534b5f444f4e545f4558495354000000000000000000000000000000000081525090610666576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161065d9190610e89565b60405180910390fd5b50826000600160008381526020019081526020016000209050600160038111156106b9577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b8160020160009054906101000a900460ff166003811115610703577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b146040518060400160405280601281526020017f5441534b5f4e4f545f415641494c41424c4500000000000000000000000000008152509061077b576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107729190610e89565b60405180910390fd5b50856006600082815260200190815260200160002060009054906101000a900460ff16156040518060400160405280600d81526020017f555345525f4841535f5441534b0000000000000000000000000000000000000081525090610816576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161080d9190610e89565b60405180910390fd5b5060016006600089815260200190815260200160002060006101000a81548160ff02191690831515021790555060026001600088815260200190815260200160002060020160006101000a81548160ff021916908360038111156108a3577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b02179055506003600088815260200190815260200160002060000154600160008881526020019081526020016000206000018190555085877f79abe3f1773abfb5f6cb7b5538ca39f03dcbb7ee4b9a991d76885cf70bd469fb60405160405180910390a350505050505050565b6000805461091d90610f9e565b80601f016020809104026020016040519081016040528092919081815260200182805461094990610f9e565b80156109965780601f1061096b57610100808354040283529160200191610996565b820191906000526020600020905b81548152906001019060200180831161097957829003601f168201915b505050505081565b80600060038111156109d9577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b6001600083815260200190815260200160002060020160009054906101000a900460ff166003811115610a35577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b146040518060400160405280600b81526020017f5441534b5f45584953545300000000000000000000000000000000000000000081525090610aad576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610aa49190610e89565b60405180910390fd5b50600060016000848152602001908152602001600020905060008160000181905550610aeb6203f48063ffffffff1642610bf090919063ffffffff16565b816001018190555060018160020160006101000a81548160ff02191690836003811115610b41577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b02179055506002839080600181540180825580915050600190039060005260206000200160009091909190915055827f1e28175955a872c8252a6e5cf36ac6b318d074eb78b49731e5cb9ddc2d870b6360405160405180910390a2505050565b818160009190610bb2929190610c27565b507fd72e0c57dfc415d699dbb367f561821dd76f681a6d3916009299d4e89b5f3bcf8282604051610be4929190610e65565b60405180910390a15050565b60008183610bfe9190610ee2565b905092915050565b5080546000825590600052602060002090810190610c249190610cad565b50565b828054610c3390610f9e565b90600052602060002090601f016020900481019282610c555760008555610c9c565b82601f10610c6e57803560ff1916838001178555610c9c565b82800160010185558215610c9c579182015b82811115610c9b578235825591602001919060010190610c80565b5b509050610ca99190610cca565b5090565b5b80821115610cc6576000816000905550600101610cae565b5090565b5b80821115610ce3576000816000905550600101610ccb565b5090565b600081359050610cf681611088565b92915050565b60008083601f840112610d0e57600080fd5b8235905067ffffffffffffffff811115610d2757600080fd5b602083019150836001820283011115610d3f57600080fd5b9250929050565b600060208284031215610d5857600080fd5b6000610d6684828501610ce7565b91505092915050565b60008060408385031215610d8257600080fd5b6000610d9085828601610ce7565b9250506020610da185828601610ce7565b9150509250929050565b60008060208385031215610dbe57600080fd5b600083013567ffffffffffffffff811115610dd857600080fd5b610de485828601610cfc565b92509250509250929050565b6000610dfc8385610ed1565b9350610e09838584610f5c565b610e1283611077565b840190509392505050565b6000610e2882610ec6565b610e328185610ed1565b9350610e42818560208601610f6b565b610e4b81611077565b840191505092915050565b610e5f81610f4c565b82525050565b60006020820190508181036000830152610e80818486610df0565b90509392505050565b60006020820190508181036000830152610ea38184610e1d565b905092915050565b6000602082019050610ec06000830184610e56565b92915050565b600081519050919050565b600082825260208201905092915050565b6000610eed82610f42565b9150610ef883610f42565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff03821115610f2d57610f2c611019565b5b828201905092915050565b6000819050919050565b6000819050919050565b600063ffffffff82169050919050565b82818337600083830152505050565b60005b83811015610f89578082015181840152602081019050610f6e565b83811115610f98576000848401525b50505050565b60006002820490506001821680610fb657607f821691505b60208210811415610fca57610fc9611048565b5b50919050565b6000610fdb82610f42565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82141561100e5761100d611019565b5b600182019050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b6000601f19601f8301169050919050565b61109181610f38565b811461109c57600080fd5b5056fea2646970667358221220d1e578d0b3bb1de86ce72bd33969e7595a97d141fb27a3b11582a1fe7e67f26b64736f6c63430008040033","deployedBytecode":"0x608060405234801561001057600080fd5b506004361061007d5760003560e01c80634988a5691161005b5780634988a569146100c65780638367e120146100e2578063b293e81c14610100578063e8c75a301461011c5761007d565b806303f33ef2146100825780631ef3755d146100a05780632dc03259146100aa575b600080fd5b61008a610138565b6040516100979190610eab565b60405180910390f35b6100a861013f565b005b6100c460048036038101906100bf9190610d46565b610368565b005b6100e060048036038101906100db9190610d6f565b6104b9565b005b6100ea610910565b6040516100f79190610e89565b60405180910390f35b61011a60048036038101906101159190610d46565b61099e565b005b61013660048036038101906101319190610dab565b610ba1565b005b6203f48081565b60005b6002805490508110156102445760006002828154811061018b577f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b90600052602060002001549050600060016000838152602001908152602001600020905060008160020160006101000a81548160ff021916908360038111156101fd577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b0217905550817fa96209878fc4722b56527db6cf4b72ad6bfddb3ad9968f7de1125d02acc9aa1060405160405180910390a25050808061023c90610fd0565b915050610142565b5060005b60055481101561030c57600060046000838152602001908152602001600020549050600060036000838152602001908152602001600020905060008160010160006101000a81548160ff02191690831515021790555060006006600084815260200190815260200160002060006101000a81548160ff021916908315150217905550817fc26eb30613e535870aeacfc24e58a8fb60e992f0d8bfe04ec9c98db26b53c5e560405160405180910390a25050808061030490610fd0565b915050610248565b506002600061031b9190610c06565b60006005819055503373ffffffffffffffffffffffffffffffffffffffff167f27563bd9f3c446b90907219bff4dda76f7ca7ede071560f5856f9848e04048b160405160405180910390a2565b806003600082815260200190815260200160002060010160009054906101000a900460ff16156040518060400160405280601381526020017f555345525f414c52454144595f4558495354530000000000000000000000000081525090610405576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016103fc9190610e89565b60405180910390fd5b508160046000600554815260200190815260200160002081905550600554600360008481526020019081526020016000206000018190555060016003600084815260200190815260200160002060010160006101000a81548160ff0219169083151502179055506104826001600554610bf090919063ffffffff16565b600581905550817f78997021e09413de1e36500ed07f9f6c73541162817fc3ea6a115e5e3d3affb960405160405180910390a25050565b816003600082815260200190815260200160002060010160009054906101000a900460ff166040518060400160405280600f81526020017f555345525f444f4e545f4558495354000000000000000000000000000000000081525090610555576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161054c9190610e89565b60405180910390fd5b508160006003811115610591577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b6001600083815260200190815260200160002060020160009054906101000a900460ff1660038111156105ed577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b14156040518060400160405280600f81526020017f5441534b5f444f4e545f4558495354000000000000000000000000000000000081525090610666576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161065d9190610e89565b60405180910390fd5b50826000600160008381526020019081526020016000209050600160038111156106b9577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b8160020160009054906101000a900460ff166003811115610703577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b146040518060400160405280601281526020017f5441534b5f4e4f545f415641494c41424c4500000000000000000000000000008152509061077b576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107729190610e89565b60405180910390fd5b50856006600082815260200190815260200160002060009054906101000a900460ff16156040518060400160405280600d81526020017f555345525f4841535f5441534b0000000000000000000000000000000000000081525090610816576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161080d9190610e89565b60405180910390fd5b5060016006600089815260200190815260200160002060006101000a81548160ff02191690831515021790555060026001600088815260200190815260200160002060020160006101000a81548160ff021916908360038111156108a3577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b02179055506003600088815260200190815260200160002060000154600160008881526020019081526020016000206000018190555085877f79abe3f1773abfb5f6cb7b5538ca39f03dcbb7ee4b9a991d76885cf70bd469fb60405160405180910390a350505050505050565b6000805461091d90610f9e565b80601f016020809104026020016040519081016040528092919081815260200182805461094990610f9e565b80156109965780601f1061096b57610100808354040283529160200191610996565b820191906000526020600020905b81548152906001019060200180831161097957829003601f168201915b505050505081565b80600060038111156109d9577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b6001600083815260200190815260200160002060020160009054906101000a900460ff166003811115610a35577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b146040518060400160405280600b81526020017f5441534b5f45584953545300000000000000000000000000000000000000000081525090610aad576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610aa49190610e89565b60405180910390fd5b50600060016000848152602001908152602001600020905060008160000181905550610aeb6203f48063ffffffff1642610bf090919063ffffffff16565b816001018190555060018160020160006101000a81548160ff02191690836003811115610b41577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b02179055506002839080600181540180825580915050600190039060005260206000200160009091909190915055827f1e28175955a872c8252a6e5cf36ac6b318d074eb78b49731e5cb9ddc2d870b6360405160405180910390a2505050565b818160009190610bb2929190610c27565b507fd72e0c57dfc415d699dbb367f561821dd76f681a6d3916009299d4e89b5f3bcf8282604051610be4929190610e65565b60405180910390a15050565b60008183610bfe9190610ee2565b905092915050565b5080546000825590600052602060002090810190610c249190610cad565b50565b828054610c3390610f9e565b90600052602060002090601f016020900481019282610c555760008555610c9c565b82601f10610c6e57803560ff1916838001178555610c9c565b82800160010185558215610c9c579182015b82811115610c9b578235825591602001919060010190610c80565b5b509050610ca99190610cca565b5090565b5b80821115610cc6576000816000905550600101610cae565b5090565b5b80821115610ce3576000816000905550600101610ccb565b5090565b600081359050610cf681611088565b92915050565b60008083601f840112610d0e57600080fd5b8235905067ffffffffffffffff811115610d2757600080fd5b602083019150836001820283011115610d3f57600080fd5b9250929050565b600060208284031215610d5857600080fd5b6000610d6684828501610ce7565b91505092915050565b60008060408385031215610d8257600080fd5b6000610d9085828601610ce7565b9250506020610da185828601610ce7565b9150509250929050565b60008060208385031215610dbe57600080fd5b600083013567ffffffffffffffff811115610dd857600080fd5b610de485828601610cfc565b92509250509250929050565b6000610dfc8385610ed1565b9350610e09838584610f5c565b610e1283611077565b840190509392505050565b6000610e2882610ec6565b610e328185610ed1565b9350610e42818560208601610f6b565b610e4b81611077565b840191505092915050565b610e5f81610f4c565b82525050565b60006020820190508181036000830152610e80818486610df0565b90509392505050565b60006020820190508181036000830152610ea38184610e1d565b905092915050565b6000602082019050610ec06000830184610e56565b92915050565b600081519050919050565b600082825260208201905092915050565b6000610eed82610f42565b9150610ef883610f42565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff03821115610f2d57610f2c611019565b5b828201905092915050565b6000819050919050565b6000819050919050565b600063ffffffff82169050919050565b82818337600083830152505050565b60005b83811015610f89578082015181840152602081019050610f6e565b83811115610f98576000848401525b50505050565b60006002820490506001821680610fb657607f821691505b60208210811415610fca57610fc9611048565b5b50919050565b6000610fdb82610f42565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82141561100e5761100d611019565b5b600182019050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b6000601f19601f8301169050919050565b61109181610f38565b811461109c57600080fd5b5056fea2646970667358221220d1e578d0b3bb1de86ce72bd33969e7595a97d141fb27a3b11582a1fe7e67f26b64736f6c63430008040033","devdoc":{"kind":"dev","methods":{"createTask(bytes32)":{"params":{"_taskId":"The task\'s id."}}},"version":1},"userdoc":{"events":{"TaskCreated(bytes32)":{"notice":"Events"},"TasksRestart(address)":{"notice":"Events"}},"kind":"user","methods":{"apiUrl()":{"notice":"State"},"createTask(bytes32)":{"notice":"Create a new task."},"setApiUrl(string)":{"notice":"ACL"}},"version":1},"storageLayout":{"storage":[{"astId":325,"contract":"contracts/allocation-models/FCFSTAA.sol:FCFSTAA","label":"apiUrl","offset":0,"slot":"0","type":"t_string_storage"},{"astId":387,"contract":"contracts/allocation-models/FCFSTAA.sol:FCFSTAA","label":"tasks","offset":0,"slot":"1","type":"t_mapping(t_bytes32,t_struct(Task)418_storage)"},{"astId":390,"contract":"contracts/allocation-models/FCFSTAA.sol:FCFSTAA","label":"taskIds","offset":0,"slot":"2","type":"t_array(t_bytes32)dyn_storage"},{"astId":395,"contract":"contracts/allocation-models/FCFSTAA.sol:FCFSTAA","label":"users","offset":0,"slot":"3","type":"t_mapping(t_bytes32,t_struct(User)410_storage)"},{"astId":399,"contract":"contracts/allocation-models/FCFSTAA.sol:FCFSTAA","label":"userIndexToId","offset":0,"slot":"4","type":"t_mapping(t_uint256,t_bytes32)"},{"astId":401,"contract":"contracts/allocation-models/FCFSTAA.sol:FCFSTAA","label":"numberOfUsers","offset":0,"slot":"5","type":"t_uint256"},{"astId":405,"contract":"contracts/allocation-models/FCFSTAA.sol:FCFSTAA","label":"userTaskRegistry","offset":0,"slot":"6","type":"t_mapping(t_bytes32,t_bool)"}],"types":{"t_array(t_bytes32)dyn_storage":{"base":"t_bytes32","encoding":"dynamic_array","label":"bytes32[]","numberOfBytes":"32"},"t_bool":{"encoding":"inplace","label":"bool","numberOfBytes":"1"},"t_bytes32":{"encoding":"inplace","label":"bytes32","numberOfBytes":"32"},"t_enum(Status)382":{"encoding":"inplace","label":"enum FCFSTAA.Status","numberOfBytes":"1"},"t_mapping(t_bytes32,t_bool)":{"encoding":"mapping","key":"t_bytes32","label":"mapping(bytes32 => bool)","numberOfBytes":"32","value":"t_bool"},"t_mapping(t_bytes32,t_struct(Task)418_storage)":{"encoding":"mapping","key":"t_bytes32","label":"mapping(bytes32 => struct FCFSTAA.Task)","numberOfBytes":"32","value":"t_struct(Task)418_storage"},"t_mapping(t_bytes32,t_struct(User)410_storage)":{"encoding":"mapping","key":"t_bytes32","label":"mapping(bytes32 => struct FCFSTAA.User)","numberOfBytes":"32","value":"t_struct(User)410_storage"},"t_mapping(t_uint256,t_bytes32)":{"encoding":"mapping","key":"t_uint256","label":"mapping(uint256 => bytes32)","numberOfBytes":"32","value":"t_bytes32"},"t_string_storage":{"encoding":"bytes","label":"string","numberOfBytes":"32"},"t_struct(Task)418_storage":{"encoding":"inplace","label":"struct FCFSTAA.Task","members":[{"astId":412,"contract":"contracts/allocation-models/FCFSTAA.sol:FCFSTAA","label":"userIndex","offset":0,"slot":"0","type":"t_uint256"},{"astId":414,"contract":"contracts/allocation-models/FCFSTAA.sol:FCFSTAA","label":"endDate","offset":0,"slot":"1","type":"t_uint256"},{"astId":417,"contract":"contracts/allocation-models/FCFSTAA.sol:FCFSTAA","label":"status","offset":0,"slot":"2","type":"t_enum(Status)382"}],"numberOfBytes":"96"},"t_struct(User)410_storage":{"encoding":"inplace","label":"struct FCFSTAA.User","members":[{"astId":407,"contract":"contracts/allocation-models/FCFSTAA.sol:FCFSTAA","label":"index","offset":0,"slot":"0","type":"t_uint256"},{"astId":409,"contract":"contracts/allocation-models/FCFSTAA.sol:FCFSTAA","label":"exists","offset":0,"slot":"1","type":"t_bool"}],"numberOfBytes":"64"},"t_uint256":{"encoding":"inplace","label":"uint256","numberOfBytes":"32"}}}}')},429:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"apiUrl","type":"string"}],"name":"ApiUrlSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"userId","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"taskId","type":"bytes32"}],"name":"RejecterDeleted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"userId","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"taskId","type":"bytes32"}],"name":"TaskAccepted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"userId","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"taskId","type":"bytes32"},{"indexed":false,"internalType":"bytes32","name":"previousUserId","type":"bytes32"}],"name":"TaskAllocated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"taskId","type":"bytes32"}],"name":"TaskCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"taskId","type":"bytes32"}],"name":"TaskDeleted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"userId","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"taskId","type":"bytes32"}],"name":"TaskRejected","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"entity","type":"address"}],"name":"TasksRestart","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"userId","type":"bytes32"}],"name":"UserDeleted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"userId","type":"bytes32"}],"name":"UserRegistered","type":"event"},{"inputs":[],"name":"MAX_ALLOCATED_TASKS","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_userId","type":"bytes32"},{"internalType":"bytes32","name":"_taskId","type":"bytes32"}],"name":"acceptTask","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_taskId","type":"bytes32"},{"internalType":"bytes32","name":"_userId","type":"bytes32"}],"name":"allocateTask","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"apiUrl","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_taskId","type":"bytes32"},{"internalType":"uint256","name":"reallocationTime","type":"uint256"}],"name":"createTask","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_userId","type":"bytes32"},{"internalType":"uint256","name":"_taskIndex","type":"uint256"}],"name":"getAllocatedTask","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_taskId","type":"bytes32"},{"internalType":"bytes32","name":"_userId","type":"bytes32"}],"name":"getRejecter","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_taskId","type":"bytes32"}],"name":"getTask","outputs":[{"internalType":"bytes32","name":"assignee","type":"bytes32"},{"internalType":"uint256","name":"allocationIndex","type":"uint256"},{"internalType":"uint256","name":"endDate","type":"uint256"},{"internalType":"enum RoundRobinTAA.Status","name":"status","type":"uint8"},{"internalType":"uint256","name":"reallocationTime","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_userId","type":"bytes32"}],"name":"getUser","outputs":[{"internalType":"uint256","name":"index","type":"uint256"},{"internalType":"uint256","name":"benefits","type":"uint256"},{"internalType":"bool","name":"available","type":"bool"},{"internalType":"bool","name":"exists","type":"bool"},{"internalType":"uint256","name":"allocatedTasksLength","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getUserLength","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_taskId","type":"bytes32"}],"name":"reallocateTask","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_userId","type":"bytes32"}],"name":"registerUser","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_userId","type":"bytes32"},{"internalType":"bytes32","name":"_taskId","type":"bytes32"}],"name":"rejectTask","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"restart","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_apiUrl","type":"string"}],"name":"setApiUrl","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},430:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"apiUrl","type":"string"}],"name":"ApiUrlSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"userId","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"taskId","type":"bytes32"}],"name":"RejecterDeleted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"userId","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"taskId","type":"bytes32"}],"name":"TaskAccepted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"userId","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"taskId","type":"bytes32"},{"indexed":false,"internalType":"bytes32","name":"previousUserId","type":"bytes32"}],"name":"TaskAllocated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"taskId","type":"bytes32"}],"name":"TaskCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"taskId","type":"bytes32"}],"name":"TaskDeleted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"userId","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"taskId","type":"bytes32"}],"name":"TaskRejected","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"entity","type":"address"}],"name":"TasksRestart","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"userId","type":"bytes32"}],"name":"UserCalendarUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"userId","type":"bytes32"}],"name":"UserDeleted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"userId","type":"bytes32"}],"name":"UserRegistered","type":"event"},{"inputs":[],"name":"MAX_ALLOCATED_TASKS","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_userId","type":"bytes32"},{"internalType":"bytes32","name":"_taskId","type":"bytes32"}],"name":"acceptTask","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_taskId","type":"bytes32"},{"internalType":"bytes32","name":"_userId","type":"bytes32"}],"name":"allocateTask","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"apiUrl","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_taskId","type":"bytes32"},{"internalType":"uint256","name":"reallocationTime","type":"uint256"}],"name":"createTask","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_userId","type":"bytes32"},{"internalType":"uint256","name":"_taskIndex","type":"uint256"}],"name":"getAllocatedTask","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_taskId","type":"bytes32"},{"internalType":"bytes32","name":"_userId","type":"bytes32"}],"name":"getRejecter","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_taskId","type":"bytes32"}],"name":"getTask","outputs":[{"internalType":"bytes32","name":"assignee","type":"bytes32"},{"internalType":"uint256","name":"allocationIndex","type":"uint256"},{"internalType":"uint256","name":"endDate","type":"uint256"},{"internalType":"enum RoundRobinCalTAA.Status","name":"status","type":"uint8"},{"internalType":"uint256","name":"reallocationTime","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_userId","type":"bytes32"}],"name":"getUser","outputs":[{"internalType":"uint256","name":"index","type":"uint256"},{"internalType":"uint256","name":"benefits","type":"uint256"},{"internalType":"bool","name":"available","type":"bool"},{"internalType":"bool","name":"exists","type":"bool"},{"internalType":"uint256","name":"allocatedTasksLength","type":"uint256"},{"internalType":"uint256[]","name":"calendarRangesStart","type":"uint256[]"},{"internalType":"uint256[]","name":"calendarRangesEnd","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getUserLength","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_taskId","type":"bytes32"}],"name":"reallocateTask","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_userId","type":"bytes32"}],"name":"registerUser","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_userId","type":"bytes32"},{"internalType":"bytes32","name":"_taskId","type":"bytes32"}],"name":"rejectTask","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"restart","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_apiUrl","type":"string"}],"name":"setApiUrl","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"_userId","type":"bytes32"},{"internalType":"uint256[]","name":"rangesStart","type":"uint256[]"},{"internalType":"uint256[]","name":"rangesEnd","type":"uint256[]"}],"name":"setUserCalendarRanges","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},434:function(e,t,a){e.exports=a.p+"static/media/Logo.11008d2b.svg"},435:function(e,t,a){e.exports=a.p+"static/media/MetamaskLogo.92a73d44.png"},440:function(e,t,a){e.exports=a.p+"static/media/DownloadMetamask.885082cf.png"},442:function(e,t,a){e.exports=a.p+"static/media/NoThumbnail.c9f7f48d.jpg"},443:function(e,t,a){e.exports=a.p+"static/media/NoVideo.594c1aea.png"},478:function(e,t,a){e.exports=a(938)},566:function(e,t){},568:function(e,t){},583:function(e,t){},584:function(e,t){},604:function(e,t){},607:function(e,t){},608:function(e,t){},610:function(e,t){},671:function(e,t){},773:function(e,t){},779:function(e,t){},802:function(e,t){},804:function(e,t){},810:function(e,t){},811:function(e,t){},813:function(e,t){},825:function(e,t){},828:function(e,t){},840:function(e,t){},848:function(e,t){},871:function(e,t){},907:function(e,t){},938:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(23),s=a.n(i),o=a(117),c=a(1015),l=a(1016),u=a(423),d=a.n(u),f=a(24),m=a(451),b=a(289),p=a.n(b),g=a(290),y=a.n(g),h=a(291),v=a.n(h),k=a(292),E=a.n(k),T=a(293),j=a.n(T),O=a(294),S=a.n(O),A=a(295),w=a.n(A),I={fontFamily:"Roboto",fontStyle:"normal",fontWeight:100,src:"\n    url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1MmgVxIIzI.woff2) format('woff2'),\n    url(".concat(p.a,") format('ttf')")},C={fontFamily:"Roboto",fontStyle:"normal",fontWeight:300,src:"\n    local('Roboto Light'),\n    local('Roboto-Light'),\n    url(".concat(v.a,") format('woff2'),\n    url(").concat(y.a,") format('woff')\n  ")},_={fontFamily:"Roboto",fontStyle:"normal",fontWeight:500,src:"\n    local('Roboto Medium'),\n    local('Roboto-Medium'),\n    url(".concat(j.a,") format('woff2'),\n    url(").concat(E.a,") format('woff')\n  ")},x={fontFamily:"Roboto",fontStyle:"normal",fontWeight:700,src:"\n    local('Roboto Bold'),\n    local('Roboto-Bold'),\n    url(".concat(w.a,") format('woff2'),\n    url(").concat(S.a,") format('woff')\n  ")},R="#fff",N="#FBF6F6",M="#f3f4f6",D="#ACB0B3",U="#333333",B="#474955",F="#6E3759",L="#69C96C",z="#389b3c",P=Object(m.a)({palette:{secondary:{main:U},text:{dark:B,main:U,light:N,secondary:D},chips:{low:"#30957B",medium:"#80BD3E",high:"#F3254D"},background:{primary:N,secondary:M,green:L},translateButton:F,info:{main:F},success:{main:L,dark:z}},typography:{fontFamily:["Roboto","Arial","serif"]},spacing:16,mixins:{toolbar:{minHeight:"90px"}},overrides:{MuiCssBaseline:{"@global":{"@font-face":[I,C,{fontFamily:"Roboto",fontStyle:"normal",fontWeight:400,src:"\n    url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu4mxK.woff2) format('woff2')\n  "},_,x],body:{backgroundColor:R,overflowX:"hidden"}}}}}),H=a(20),W=a.n(H),q=a(36),K=a(274),V="https://rinkeby.infura.io/v3/ca8c6baba21949019095d8b9ec1cd302",$="https://rinkeby.infura.io/v3/ca8c6baba21949019095d8b9ec1cd302",Z={1:{name:"Mainnet",chain:"ETH",network:"mainnet",rpc:["https://mainnet.infura.io/v3/".concat("INFURA_MAINNET_URL")],faucets:[],nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},infoURL:"https://ethereum.org",shortName:"eth",chainId:1,networkId:1,slip44:60,ens:{registry:"0x314159265dd8dbb310642f98f50c066173c1259b"}},4:{name:"Rinkeby",chain:"ETH",network:"rinkeby",rpc:[V],faucets:["https://faucet.rinkeby.io"],nativeCurrency:{name:"Rinkeby Ether",symbol:"RIN",decimals:18},infoURL:"https://www.rinkeby.io",shortName:"rin",chainId:4,networkId:4,ens:{registry:"0xe7410170f87102df0055eb195163a03b7f2bff4a"}},5:{name:"Goerli",network:"goerli",rpc:[$],faucets:["https://faucet.goerli.io"],nativeCurrency:{name:"Goerli Ether",decimals:18},infoURL:"https://goerli.net/",chainId:5,networkId:5}};function G(e){if("staging"===e)return 4}function Y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G("staging");return Z[e]}var X=function(e){var t=e.networkOnlyConnector,a=void 0!==t&&t,i=e.children,s=K.Connectors.InjectedConnector,o=K.Connectors.NetworkOnlyConnector,c=Y().chainId,l=Object(f.c)();return Object(n.useEffect)((function(){return function(){var e=Object(q.a)(W.a.mark((function e(){var t;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a?new o({providerURL:"https://rinkeby.infura.io/v3/ca8c6baba21949019095d8b9ec1cd302"}):new s({supportedChainIds:[c]}),e.next=3,l.activate(t);case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),l.deactivate()}),[]),r.a.createElement(r.a.Fragment,null,i)},Q=a(452),J=a(1019),ee=a(1021),te=a(979),ae=a(6),ne=a(428),re=a(429),ie=a(430),se=a(66),oe=a(1020);function ce(){var e=Object(se.a)(["\n    query Tasks($userId: ID!, $first: Int!, $skip: Int!) {\n        tasks(\n            where: { status: Accepted, assignee: $userId }\n            first: $first\n            skip: $skip\n        ) {\n            id\n            endDate\n            reallocationTime\n            status\n            assignee {\n                id\n            }\n        }\n    }\n"]);return ce=function(){return e},e}function le(){var e=Object(se.a)(["\n    query Tasks($userId: ID!, $first: Int!, $skip: Int!) {\n        tasks(\n            where: { status: Assigned, assignee: $userId }\n            first: $first\n            skip: $skip\n        ) {\n            id\n            endDate\n            reallocationTime\n            status\n            assignee {\n                id\n            }\n        }\n    }\n"]);return le=function(){return e},e}function ue(){var e=Object(se.a)(["\n    query Tasks($first: Int!, $skip: Int!) {\n        tasks(first: $first, skip: $skip) {\n            id\n            endDate\n            reallocationTime\n            status\n            assignee {\n                id\n            }\n        }\n    }\n"]);return ue=function(){return e},e}function de(){var e=Object(se.a)(["\n    query RRCalUser($id: String!) {\n        user(id: $id) {\n            id\n            benefits\n            available\n            calendarRangesStart\n            calendarRangesEnd\n        }\n    }\n"]);return de=function(){return e},e}function fe(){var e=Object(se.a)(["\n    query RRUser($id: String!) {\n        user(id: $id) {\n            id\n            benefits\n            available\n            # rejectedTasks {\n            #     id\n            # }\n        }\n    }\n"]);return fe=function(){return e},e}function me(){var e=Object(se.a)(["\n    query Users($first: Int!, $skip: Int!) {\n        users(first: $first, skip: $skip) {\n            id\n            benefits\n            available\n            # rejectedTasks {\n            #     id\n            # }\n        }\n    }\n"]);return me=function(){return e},e}function be(){var e=Object(se.a)(["\n    query Tasks($userId: ID!, $first: Int!, $skip: Int!) {\n        tasks(\n            where: { status: Accepted, userId: $userId }\n            first: $first\n            skip: $skip\n        ) {\n            id\n            status\n            userId\n        }\n    }\n"]);return be=function(){return e},e}function pe(){var e=Object(se.a)(["\n    query Tasks($first: Int!, $skip: Int!) {\n        tasks(where: { status: Available }, first: $first, skip: $skip) {\n            id\n            status\n            userId\n        }\n    }\n"]);return pe=function(){return e},e}function ge(){var e=Object(se.a)(["\n    query Tasks($first: Int!, $skip: Int!) {\n        tasks(first: $first, skip: $skip) {\n            id\n            status\n            userId\n        }\n    }\n"]);return ge=function(){return e},e}function ye(){var e=Object(se.a)(["\n    query FCFSUser($id: String!) {\n        users(id: $id) {\n            id\n            hasTask\n        }\n    }\n"]);return ye=function(){return e},e}function he(){var e=Object(se.a)(["\n    query Users($first: Int!, $skip: Int!) {\n        users(first: $first, skip: $skip) {\n            id\n            hasTask\n        }\n    }\n"]);return he=function(){return e},e}var ve=Object(oe.a)(he()),ke=Object(oe.a)(ye()),Ee=Object(oe.a)(ge()),Te=Object(oe.a)(pe()),je=Object(oe.a)(be()),Oe=Object(oe.a)(me()),Se=Object(oe.a)(fe()),Ae=Object(oe.a)(de()),we=Object(oe.a)(ue()),Ie=Object(oe.a)(le()),Ce=Object(oe.a)(ce()),_e=[{name:"fcfs",displayName:"First come first serve",description:"We are currently piloting a new way of distributing the tasks and therefore the value within our platform. Thank you for your collaboration! This model allocates the task to the first person to claim for it. Is the current model used in the oficial platform so it should be familiar. We use it as the reference to see the performance of the other models.",contractAddress:"0x1105a31D372d1108c2af890f05eAAe222fa4A9F1",contractAbi:ne.abi,endpoint:"https://api.studio.thegraph.com/query/29508/fcfs-task-allocation/v0.0.8",requests:{users:ve,user:ke,tasks:Ee,tasksAvailable:Te,tasksAccepted:je}},{name:"rr",displayName:"Round robin",description:"We are currently piloting a new way of distributing the tasks and therefore the value within our platform. Thank you for your collaboration! This model gets each incoming task and assigns it to the first user in a list. The user then is moved to the end of the list. The user can accept or reject the task. Then they will need to wait until a new task is assigned to they.",contractAddress:"0x87042c1432889DE0e871F9dDf029Ad18D25792eF",contractAbi:re,endpoint:"https://api.studio.thegraph.com/query/29508/rr-task-allocation/v0.0.9",requests:{users:Oe,user:Se,tasks:we,tasksAssigned:Ie,tasksAccepted:Ce}},{name:"rr-cal",displayName:"Round robin with calendar",description:"We are currently piloting a new way of distributing the tasks and therefore the value within our platform. Thank you for your collaboration! This model gets each incoming task and assigns it to the first user in a list based in the users availability. The user then is moved to the end of the list. The user can accept or reject the task. Then they will need to wait until a new task is assigned to they.",contractAddress:"0x9dedE0Fa91030E5C4DeC465fd540581144eEe1a2",contractAbi:ie,endpoint:"https://api.studio.thegraph.com/query/29508/rr-cal-task-allocation/v0.0.6",requests:{users:Oe,user:Ae,tasks:we,tasksAssigned:Ie,tasksAccepted:Ce}}],xe=Object(n.createContext)();function Re(e){var t=e.children,a=Object(n.useState)("ta-round-robin"),i=Object(ae.a)(a,2),s=i[0],o=(i[1],Object(f.c)().library),c=Object(n.useState)(_e[1].name),l=Object(ae.a)(c,2),u=l[0],d=l[1],m=Object(n.useState)(_e[1].displayName),b=Object(ae.a)(m,2),p=b[0],g=b[1],y=Object(n.useState)(_e[1].contractAddress),h=Object(ae.a)(y,2),v=h[0],k=h[1],E=Object(n.useState)(_e[1].contractAbi),T=Object(ae.a)(E,2),j=T[0],O=T[1],S=Object(n.useState)(_e[1].endpoint),A=Object(ae.a)(S,2),w=A[0],I=A[1],C=Object(n.useState)(),_=Object(ae.a)(C,2),x=_[0],R=_[1],N=Object(n.useState)(),M=Object(ae.a)(N,2),D=M[0],U=M[1];Object(n.useEffect)((function(){if(o&&j&&v){var e=function(e,t,a){if(e&&t)return new e.eth.Contract(t,a)}(o,j,v);U(e),console.log("[AppStateContext] Setting contract instance"),console.log(e)}}),[o,j,v]);var B=function(e){var t=_e.find((function(t){return t.name===e}));t&&(console.log("Setting model"),console.log(t.contractAddress),d(t.name),g(t.displayName),k(t.contractAddress),O(t.contractAbi),I(t.endpoint))},F=function(e){R(e)},L=Object(n.useMemo)((function(){return{appName:s,modelName:u,modelDisplayName:p,modelContractInstance:D,contractAddress:v,contractABI:j,endpoint:w,setModel:B,userId:x,setUser:F}}),[D,v,w,u]);return r.a.createElement(xe.Provider,{value:L},t)}function Ne(){var e=Object(n.useContext)(xe);if(!e)throw new Error("useAppState must be used within an AppStateProvider");return e}function Me(e){var t=e.children,a=Ne().endpoint;return r.a.createElement(te.a,{client:function(e){var t=Object(Q.a)({uri:e});return new J.a({link:t,cache:new ee.a})}(a)},t)}var De=a(35),Ue=a(15);function Be(e){return"https://staging.amara.org/en/subtitles/editor/".concat(e.video,"/").concat(e.language,"/?team=").concat(e.team)}var Fe,Le=a(9),ze={Restart:Symbol("RESTART_ACTION"),RegisterUser:Symbol("REGISTER_USER_ACTION"),CreateTask:Symbol("CREATE_TASK_ACTION"),AcceptTask:Symbol("ACCEPT_TASK_ACTION"),RejectTask:Symbol("REJECT_TASK_ACTION"),SetUserCalendarRanges:Symbol("SET_USER_CALENDAR_RANGES_ACTION")},Pe=(Fe={},Object(Le.a)(Fe,ze.Restart,"restart"),Object(Le.a)(Fe,ze.RegisterUser,"registerUser"),Object(Le.a)(Fe,ze.CreateTask,"createTask"),Object(Le.a)(Fe,ze.AcceptTask,"acceptTask"),Object(Le.a)(Fe,ze.RejectTask,"rejectTask"),Object(Le.a)(Fe,ze.SetUserCalendarRanges,"setUserCalendarRanges"),Fe);function He(e){return Pe[e]}var We=ze.AcceptTask,qe=ze.RejectTask;function Ke(e){switch(e){case"error":return"The transaction failed.";case"success":return"The transaction succeeded.";default:return"The transaction was sent. Wait until it's accepted. "}}function Ve(e){switch(e){case We:return"Assignment Accepted";case qe:return"Assignment Rejected";default:return"Assignment Processed"}}function $e(e,t){var a,n=e.split("/").filter((function(e){return e.length}));return n[n.length-1].split("&").filter((function(e){return e.length})).forEach((function(e){e.includes(t)&&(a=e.split("=")[1])})),a}function Ze(e,t){var a="/"===e[e.length-1]?e:e+"/";return t.forEach((function(e){e.key&&e.value&&("/"===a[a.length-1]?a+=e.key+"="+e.value:a+="&"+e.key+"="+e.value)})),a}var Ge=a(14),Ye=a(97);function Xe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:66,a=Object(Ye.toHex)(e),n=t-a.length;return n<=0?a:a+Array(n).fill(0).join("")}function Qe(e){return e.endDate?Object(Ue.a)(Object(Ue.a)({},e),{},{endDate:(t=e.endDate,new Date(1e3*t))}):Object(Ue.a)({},e);var t}function Je(e,t){return e.map((function(e){var a=t.find((function(t){return t.job_id===e.id}));return Object(Ue.a)({contractData:Object(Ue.a)({},e)},a)}))}var et=a(1024);function tt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{first:50,skip:0},t=e.first,a=e.skip,n=Ne(),r=n.modelName,i=_e.find((function(e){return e.name===r})),s=Object(et.a)(i.requests.users,{variables:{first:t,skip:a}}),o=s.data,c=(s.loading,s.error),l=s.refetch;return c&&console.log(c),{users:o?o.users:null,refetch:l}}function at(e){var t=Ne().modelName,a=_e.find((function(e){return e.name===t})),n=Object(et.a)(a.requests.user,{variables:{id:e}}),r=n.data,i=(n.loading,n.error);return i&&console.log(i),r?r.user:void 0}function nt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{first:50,skip:0},t=e.first,a=e.skip,n=Ne(),r=n.modelName,i=_e.find((function(e){return e.name===r})),s=Object(et.a)(i.requests.tasks,{variables:{first:t,skip:a},pollInterval:2e3,fetchPolicy:"network-only"}),o=s.data,c=(s.loading,s.error),l=s.refetch,u=s.stopPolling;return c&&(u(),console.log(c)),{tasks:o?o.tasks:void 0,refetch:l}}function rt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{first:50,skip:0},a=t.first,n=t.skip,r=Ne(),i=r.modelName,s=_e.find((function(e){return e.name===i})),o=Object(et.a)(s.requests.tasksAccepted,{variables:{userId:e,first:a,skip:n},pollInterval:2e3}),c=o.data,l=(o.loading,o.error),u=o.stopPolling;return l&&(u(),console.log(l)),c&&c.tasks.length>0&&u(),c?c.tasks.map((function(e){return Qe(e)})):void 0}function it(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";return e.reduce((function(e,a){var n=a[t];return e.set(n,a),e}),new Map)}var st=a(433),ot=a.n(st),ct="".concat("https://amara-api-proxy.herokuapp.com/").concat("api"),lt=ot.a.create({baseURL:ct,headers:{"X-api-key":""}});function ut(e){return e?Object.keys(e).reduce((function(t,a,n){return"".concat(t).concat(n>0?"&":"").concat(a,"=").concat(e[a])}),"?"):""}function dt(e){var t={getAll:function(t){var a=ut(t);return lt.get("/".concat(e).concat(a))},getOne:function(t,a){var n=ut(a);return lt.get("/".concat(e,"/").concat(t).concat(n))},update:function(t,a){return lt.post("/".concat(e,"/").concat(t),a)},create:function(t){return lt.post("/".concat(e),t)}};return t}var ft={work_status:"needs-subtitler"},mt=Object(Ue.a)(Object(Ue.a)({},dt("teams")),{},{getTeamTasks:function(e){return lt.get("/".concat("teams","/").concat(e,"/tasks"))},getTeamSubtitleRequest:function(e,t,a){var n="/".concat("teams","/").concat(e,"/subtitle-requests/").concat(t).concat(ut(a));return lt.get(n)},getAvailableTeamSubtitleRequests:function(e,t){var a="/".concat("teams","/").concat(e,"/subtitle-requests/").concat(ut(Object(Ue.a)(Object(Ue.a)({},ft),t)));return lt.get(a)},updateSubtitleRequest:function(e,t,a){var n="/".concat("teams","/").concat(e,"/subtitle-requests/").concat(t);return lt.put(n,{subtitler:a})}}),bt={teams:mt,users:Object(Ue.a)(Object(Ue.a)({},dt("users")),{},{getDemoUsers:function(){return lt.get("/".concat("users","/default"))},getUserTeams:function(e){return lt.get("/".concat("users","/").concat(e,"/teams"))}}),videos:Object(Ue.a)({},dt("videos")),ratings:Object(Ue.a)({},dt("ratings")),setApiKeyHeader:function(e){lt.defaults.headers["X-api-key"]=e},getApiKeyHeader:function(){return lt.defaults.headers["X-api-key"]}};function pt(e,t){return gt.apply(this,arguments)}function gt(){return(gt=Object(q.a)(W.a.mark((function e(t,a){var n,r,i,s,o,c,l;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.teams,r=a.apiKey,!(n&&n.length&&t&&t.length)){e.next=11;break}return i=n[0].name,bt.setApiKeyHeader(r),s=t.map((function(e){var t=e.id;return bt.teams.getTeamSubtitleRequest(i,t)})),e.next=7,Promise.all(Object(Ge.a)(s));case 7:return o=e.sent,c=o.map((function(e){return e.data})),l=Je(t,c),e.abrupt("return",l);case 11:return e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var yt=function(e){var t=at(e),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{first:50,skip:0},a=t.first,n=t.skip,r=Ne(),i=r.modelName,s=_e.find((function(e){return e.name===i})),o=Object(et.a)(s.requests.tasksAvailable,{variables:{userId:e,first:a,skip:n},pollInterval:2e3,fetchPolicy:"network-only"}),c=o.data,l=(o.loading,o.error),u=o.stopPolling;return l&&(u(),console.log(l)),{contractTasks:c?c.tasks:void 0,stopPolling:u}}(),r=a.contractTasks,i=a.stopPolling,s=rt(e),o=Object(n.useState)(),c=Object(ae.a)(o,2),l=c[0],u=c[1],d=Object(n.useState)(),f=Object(ae.a)(d,2),m=f[0],b=f[1],p=Object(n.useState)(),g=Object(ae.a)(p,2),y=g[0],h=g[1],v=Object(n.useState)(new Map),k=Object(ae.a)(v,2),E=k[0],T=k[1];return Object(n.useEffect)((function(){var a=!0;function n(){return(n=Object(q.a)(W.a.mark((function e(n){var r,i,s;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,bt.users.getOne(n);case 3:r=e.sent,i=Object(Ue.a)({},r.data),s=Object(Ue.a)(Object(Ue.a)({},t),i),a&&u(s),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}return function(e){n.apply(this,arguments)}(e),function(){a=!1}}),[e,t]),Object(n.useEffect)((function(){function e(){return(e=Object(q.a)(W.a.mark((function e(t){var a,n,r,i;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.teams,e.next=3,bt.videos.getAll({team:a[0].name});case 3:n=e.sent,r=n.data.objects,i=it(r),T(i);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if(l&&l.teams&&l.teams.length)return function(t){e.apply(this,arguments)}(l),function(){}}),[l]),Object(n.useEffect)((function(){if(l&&r)return pt(r,l).then((function(e){b(e)})),function(){}}),[l,r]),Object(n.useEffect)((function(){if(l&&s)return y&&y.contractData.id===s[0].id||(pt(s,l).then((function(e){h(e[0]?e[0]:null)})),i()),function(){}}),[l,s]),{user:l,tasks:m,acceptedTask:y||null,videosRegistry:E,loading:!l||!E||!m||void 0===y}},ht="270e30b44122853505f7b538e66b4eeae47d04f0b98ed7f3d31025f9cd8a8e15",vt=function(){var e=Object(n.useState)(),t=Object(ae.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(),s=Object(ae.a)(i,2),o=s[0],c=s[1],l=Object(n.useState)(!1),u=Object(ae.a)(l,2),d=u[0],f=u[1],m=Object(n.useState)(),b=Object(ae.a)(m,2),p=b[0],g=b[1];function y(){return(y=Object(q.a)(W.a.mark((function e(t,a){var n,i,s=arguments;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s.length>2&&void 0!==s[2]&&s[2])){e.next=9;break}return e.next=4,t.eth.accounts.signTransaction(a,ht);case 4:n=e.sent,i=n.rawTransaction,t.eth.sendSignedTransaction(i).on("transactionHash",(function(e){r(e),f(!0)})).on("receipt",(function(e){c(e),f(!1)})).on("error",(function(e){g(e),f(!1)})),e.next=10;break;case 9:t.eth.sendTransaction(a).on("transactionHash",(function(e){r(e),f(!0)})).on("receipt",(function(e){c(e),f(!1)})).on("error",(function(e){g(e),f(!1)}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return[function(e,t){return y.apply(this,arguments)},{data:{txHash:a,receipt:o},loading:d,error:p}]},kt=ze.AcceptTask;var Et=function(e){var t=Object(f.c)(),a=t.account,r=t.library,i=Ne(),s=i.contractAddress,o=i.modelContractInstance,c=vt(),l=Object(ae.a)(c,2),u=l[0],d=l[1],m=d.data,b=m.txHash,p=m.receipt,g=d.loading,y=d.error,h=Object(n.useState)(),v=Object(ae.a)(h,2),k=v[0],E=v[1];return Object(n.useEffect)((function(){!b||g||p||y?b&&g&&!y||(b&&!g&&p&&!y?(e("success",k),E(null)):y&&(console.error(y),e("error",k))):e("info",k)}),[b,p,g,y]),{acceptTask:Object(n.useCallback)((function(t,n){var i=Xe(t),c=Xe(n),l={from:a,to:s,data:o.methods.acceptTask(i,c).encodeABI(),gasPrice:2e9};try{u(r,l,!1),E(kt)}catch(d){console.error("Could not create tx:",d),e("error",kt)}}),[r,a,e])}},Tt=a(943),jt=a(988),Ot=a(1017),St=a(1025),At=a(989),wt=a(980),It=a(51),Ct=a(1023),_t=a(142),xt=a.n(_t),Rt=a(993),Nt=a(992),Mt=a(434),Dt=a.n(Mt),Ut=a(125),Bt=Object(wt.a)((function(e){return{logoWrapper:{position:"relative",margin:"".concat(e.spacing(1),"px 0"),cursor:"default",userSelect:"none"},subtitle:{position:"absolute",top:e.spacing(2.5),left:e.spacing(5.25),color:e.palette.secondary.light}}})),Ft=function(){var e=Bt(),t=e.logoWrapper,a=e.subtitle;return r.a.createElement("div",null,r.a.createElement("div",{className:t},r.a.createElement("img",{src:Dt.a}),r.a.createElement(Ut.a,{className:a,variant:"body1"},"assignments")))},Lt=a(210),zt=a(435),Pt=a.n(zt),Ht=new Lt.a({supportedChainIds:[1,4,5]}),Wt={Injected:{name:"Metamask",logo:Pt.a,connector:Ht}};var qt=function(){var e=Object(f.c)(),t=e.activate,a=e.active,r=Object(n.useState)(!1),i=Object(ae.a)(r,2),s=i[0],o=i[1];return Object(n.useEffect)((function(){console.log("[useEagerConnect] Trying to connect"),Ht.isAuthorized().then((function(e){e?t(Ht,void 0,!0).catch((function(){o(!0)})):o(!0)}))}),[t]),Object(n.useEffect)((function(){!s&&a&&o(!0)}),[s,a]),[s]};var Kt=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(f.c)(),a=t.active,r=t.error,i=t.activate;Object(n.useEffect)((function(){var t=window.ethereum;if(t&&t.on&&!a&&!r&&!e){var n=function(e){console.log("chainChanged",e),i(Ht)},s=function(e){console.log("accountsChanged",e),e.length>0&&i(Ht)};return t.on("chainChanged",n),t.on("accountsChanged",s),function(){t.removeListener&&(t.removeListener("chainChanged",n),t.removeListener("accountsChanged",s))}}return function(){}}),[a,r,e,i])},Vt=a(991),$t=a(983),Zt=a(985),Gt=a(986),Yt=a(987),Xt=a(103),Qt=a.n(Xt),Jt=Object(wt.a)((function(e){return{root:{flexGrow:1},providerItem:{cursor:function(e){return e.activating?"":"pointer"},padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,opacity:function(e){return e.activating?"0.5":""},"&:hover":{backgroundColor:function(e){return e.activating?"":"#F6F5F5"},transition:"background-color 0.3s"}},dialogContent:{display:"flex",alignContent:"center",justifyContent:"center",border:"1px solid yelllow"},providerTitle:{},providerLogo:{width:"30%"},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},activatingProgress:{position:"absolute",top:"50%",left:"45%"}}})),ea=r.a.forwardRef((function(e,t){return r.a.createElement(Tt.a,Object.assign({},e,{direction:"down",timeout:500,ref:t}))})),ta=function(e){var t=e.logo,a=e.name,n=e.activating,i=e.onSelect,s=Jt({activating:n}),o=s.providerItem,c=s.providerLogo;return r.a.createElement(jt.a,{item:!0,className:o,onClick:i},r.a.createElement("img",{className:c,src:t}),r.a.createElement(Ut.a,{color:"primary",variant:"h5"},a),"Connect with your ",a," account.")},aa=function(e){var t=e.open,a=e.activating,n=e.onSelect,i=e.onClose,s=Jt(),o=s.closeButton,c=s.activatingProgress;return r.a.createElement("div",null,r.a.createElement($t.a,{open:t,TransitionComponent:ea,keepMounted:!0,onClose:i,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.a.createElement(Zt.a,{id:"alert-dialog-slide-title"},r.a.createElement("strong",null,"Select an account provider"),i?r.a.createElement(Gt.a,{"aria-label":"close",className:o,onClick:i},r.a.createElement(Qt.a,null)):null),r.a.createElement(Yt.a,null,r.a.createElement(jt.a,{container:!0,alignItems:"center",alignContent:"center"},Object.keys(Wt).map((function(e){var t=Wt[e],i=t.name,s=t.logo,o=t.connector;return r.a.createElement("div",{key:e},r.a.createElement(ta,{name:i,logo:s,activating:a,onSelect:function(){return n(o)}}),a&&r.a.createElement(At.a,{className:c}))}))))))},na=a(437),ra=a.n(na),ia=a(436),sa=a.n(ia),oa="undefined"===typeof devicePixelRatio?2:devicePixelRatio,ca=Object(wt.a)((function(e){return{main:{display:"inline-flex",verticalAlign:"middle",overflow:"hidden",width:function(e){return e.mainSize},height:function(e){return e.mainSize},borderRadius:function(e){return e.radius}},blockiesOpacity:{opacity:function(e){return 1-e.soften}},blockiesScaling:{display:"flex",width:function(e){return e.scalingSize},height:function(e){return e.scalingSize},background:"#fff"}}})),la=function(e){var t=e.address,a=void 0===t?"0xb4124cEB3451635DAcedd11767f004d8a28c6eE7":t,n=e.scale,i=void 0===n?1:n,s=e.radius,o=void 0===s?0:s,c=e.soften,l=3*i,u=ca({mainSize:8*l,scalingSize:8*l*oa,radius:o,soften:void 0===c?.3:c}),d=u.main,f=u.blockiesOpacity,m=u.blockiesScaling;return r.a.createElement("div",{className:d},r.a.createElement("div",{className:m},r.a.createElement("div",{className:f},r.a.createElement(sa.a,{seed:a.toLowerCase(),size:8,scale:l*oa}))))},ua=Object(wt.a)((function(e){return{wrapper:{overflow:"hidden",display:"flex",alignItems:"center",textAlign:"left",padding:e.spacing(1),borderRadius:function(e){return e.radius}},addressWrapper:{overflow:"hidden",maxWidth:2*e.spacing(8),textOverflow:"ellipsis",whiteSpace:"nowrap",letterSpacing:1,marginBottom:0,"& p":{fontSize:"16px",lineHeight:"16px"}},rightSection:{display:"flex",flexDirection:"column",justifyContent:"space-between",maxHeight:"32px",paddingLeft:e.spacing(1)},connectionMessage:{display:"flex",alignItems:"center",color:e.palette.success.main,"& span":{fontSize:"12px",lineHeight:"12px"},"& svg":{fontSize:"1rem",marginRight:".1rem"}}}})),da=function(e){var t,a=e.entity,n=e.network,i=ua({icon:!0,radius:4}),s=i.wrapper,o=i.rightSection,c=i.addressWrapper,l=i.connectionMessage,u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,a=2;return e?e.length<2*t+a?e:e.slice(0,t+a)+"\u2026"+e.slice(-t):""}(a);return r.a.createElement("div",{className:s},r.a.createElement("div",{css:"\n                    position: relative;\n                "},r.a.createElement(la,{scale:1.3,radius:4})),r.a.createElement("div",{className:o},r.a.createElement("div",{className:c},r.a.createElement(Ut.a,{variant:"body1"},u)),r.a.createElement("div",{className:l},r.a.createElement(ra.a,null),r.a.createElement(Ut.a,{variant:"caption"},"Connected to ","string"===typeof(t=n)?t.charAt(0).toUpperCase()+t.slice(1):""))))},fa=a(990),ma=a(438),ba=a.n(ma),pa=a(201),ga=a.n(pa),ya=a(439),ha=a.n(ya),va=Object(wt.a)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},titleWrapper:{display:"flex",alignItems:"center"},modalTitle:{marginLeft:e.spacing(1),color:function(t){return"error"===t.type?e.palette.secondary.light:e.palette.primary.light}}}}));var ka=function(e){var t=e.type,a=e.title,n=e.message,i=e.showIcon,s=void 0===i||i,o=e.open,c=e.onClose,l=va({type:t}),u=l.titleWrapper,d=l.modalTitle,f=l.closeButton,m=function(e){switch(e.toLowerCase()){case"error":return r.a.createElement(ba.a,{color:"secondary",fontSize:"large"});case"warning":return r.a.createElement(ha.a,{fontSize:"large"});case"info":return r.a.createElement(ga.a,{color:"primary",fontSize:"large"});default:return null}}(t);return r.a.createElement($t.a,{open:o,onClose:c},r.a.createElement(Zt.a,null,r.a.createElement("div",{className:u},s&&m,r.a.createElement("span",{className:d},a)),r.a.createElement(Gt.a,{"aria-label":"close",className:f,onClick:c},r.a.createElement(Qt.a,null))),r.a.createElement(Yt.a,null,r.a.createElement(fa.a,null,n)))},Ea=Object(wt.a)((function(e){return{wrapper:{display:"flex",alignItems:"center"},disconnectButton:{marginLeft:e.spacing(1)}}})),Ta=function(){var e=Ea(),t=e.wrapper,a=e.disconnectButton,i=Object(f.c)(),s=(i.library,i.connector),o=i.account,c=i.chainId,l=i.activate,u=i.deactivate,d=Object(n.useState)(),m=Object(ae.a)(d,2),b=m[0],p=m[1],g=Object(n.useState)(!1),y=Object(ae.a)(g,2),h=y[0],v=y[1],k=Object(n.useState)(void 0),E=Object(ae.a)(k,2),T=E[0],j=E[1],O=isNaN(c)?"":Y(c).name,S=qt(),A=Object(ae.a)(S,1)[0];Kt(!A||!!b);return Object(n.useEffect)((function(){b&&b===s&&p(void 0)}),[b,s]),r.a.createElement("div",{className:t},o?r.a.createElement(r.a.Fragment,null,r.a.createElement(da,{entity:o,network:O}),r.a.createElement(Vt.a,{variant:"contained",color:"secondary",size:"small",className:a,onClick:function(){return u()}},"Disconnect")):r.a.createElement(Vt.a,{variant:"contained",color:"primary",onClick:function(){return v(!0)}},"Connect Account"),r.a.createElement(aa,{open:h,activating:!!b,onSelect:function(e){b||(p(e),l(e,null,!0).then((function(){console.log("Connector has been activated"),v(!1)}),(function(e){console.log(e),j(function(e){var t={type:"error"};return e instanceof Lt.b?(t.title="No Ethereum Provider",t.msg="No Ethereum browser extension detected, install MetaMask on browser.",t.displayComponent="modal"):e instanceof f.a?(t.title="Wrong Network",t.msg="You're connected to an unsupported network.",t.displayComponent="modal"):e instanceof Lt.c?(t.msg="Please authorize this website to access your Ethereum account.",t.displayComponent="snackbar"):(console.error(e),t.title="Unknown Error",t.msg="An unknown error occurred. Check the console for more details.",t.displayComponent="modal"),t}(e)),p(void 0),v(!1)})))},onClose:function(){return v(!1)}}),r.a.createElement(ka,{open:!!T,type:T?T.type:"",title:T?T.title:"",message:T?T.msg:"",onClose:function(){return j(void 0)}}))},ja=Object(wt.a)((function(e){return{navBar:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}}})),Oa=function(){var e=ja(),t=e.navBar;e.buttonWrapper;return r.a.createElement(Nt.a,{color:"default",elevation:3},r.a.createElement(Rt.a,{maxWidth:"xl",className:t},r.a.createElement(Ft,null),r.a.createElement("div",null,r.a.createElement(Ta,null))))},Sa=a(5),Aa=a(994),wa=Object(wt.a)((function(e){return{flexRow:{display:"flex",flexDirection:"row"},flexRowPT:{display:"flex",flexDirection:"row",paddingTop:"1rem"},flexCol:{display:"flex",flexDirection:"column",justifyContent:"center"},footer:{padding:e.spacing(1),backgroundColor:e.palette.secondary.main,color:e.palette.text.light,position:"relative",zIndex:1200},footerContent:{justifyContent:"space-between",height:"100px","& p":{fontSize:"14px",fontWeight:600}},logos:{maxWidth:"480px",display:"flex",flexDirection:"row",justifyContent:"space-between","& img":{padding:"0.1rem",height:"100%",width:"auto",marginRight:"1rem"}},info:{justifyContent:"flex-end",color:e.palette.text.light,textAlign:"right","& div":{padding:"1rem 0.5rem"},"& a":{color:e.palette.text.light,textDecoration:"underline"}},githubIcon:{"& img":{width:e.spacing(2),height:e.spacing(2)}}}}));function Ia(){var e=wa(),t=e.flexRow,a=e.flexRowPT,n=e.flexCol,i=e.footer,s=e.footerContent,o=e.logos,c=e.info,l=e.githubIcon;return r.a.createElement("div",{className:i},r.a.createElement(Rt.a,{maxWidth:"xl",className:Object(Sa.a)(t,s)},r.a.createElement("div",{className:n},r.a.createElement(Ut.a,null,"Experiment created by:"),r.a.createElement("div",{className:o},r.a.createElement("img",{id:"p2pmod",src:"./assets/p2p-logo.svg"}),r.a.createElement("img",{id:"amara",src:"./assets/Logo.svg"}))),r.a.createElement(Ot.a,{className:Object(Sa.a)(a,c)},r.a.createElement(Ot.a,{className:n},r.a.createElement(Aa.a,{href:"https://github.com/p2pmodels",target:"_blank"},r.a.createElement("i",{className:l},r.a.createElement("img",{src:"./assets/ico-github.svg"})))),r.a.createElement(Ot.a,{className:n},r.a.createElement("span",null,"Copyleft with credits")))))}var Ca=a(460),_a=a(211),xa=a(995),Ra=Object(wt.a)((function(e){return{wrapper:{padding:e.spacing(3)},titleWrapper:{color:e.palette.error.light}}})),Na=function(e){var t=e.title,a=e.children,n=Ra(),i=n.wrapper,s=n.titleWrapper;return r.a.createElement(Ot.a,{display:"flex",flexDirection:"row",justifyContent:"center"},r.a.createElement(Ca.a,{in:!0},r.a.createElement(_a.a,{elevation:3,className:i},r.a.createElement(jt.a,{container:!0,direction:"column"},r.a.createElement(jt.a,{className:s,container:!0,direction:"row",alignItems:"center",alignContent:"center"},r.a.createElement(xa.a,{style:{fontSize:50,marginRight:5}}),r.a.createElement(Ut.a,{variant:"h4"},t)),a))))},Ma=a(440),Da=a.n(Ma),Ua=Object(wt.a)((function(e){return{imageWrapper:{width:"25%",height:"25%"},downloadImage:{width:"100%",height:"100%",objectFit:"contain"},link:{color:"inherit"}}})),Ba=function(){var e=Ua(),t=e.link,a=e.imageWrapper,n=e.downloadImage;return r.a.createElement(Na,{title:"No Metamask plugin detected"},r.a.createElement(jt.a,{item:!0},r.a.createElement(Ot.a,{mt:3,ml:1},r.a.createElement(Ut.a,{variant:"body1"},"You need to install ",r.a.createElement("strong",null,"Metamask")," on your browser before using the prototype. Once you install it refresh the page."),r.a.createElement(Ut.a,{variant:"body1"},r.a.createElement("a",{className:t,href:"https://decrypt.co/resources/metamask",target:"_blank",rel:"noopener noreferrer"},"What is Metamask and why do I need it?")))),r.a.createElement(jt.a,{container:!0,direction:"row",justify:"flex-end"},r.a.createElement(Ot.a,{className:a,mt:2},r.a.createElement("a",{href:"https://metamask.io/download.html",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:Da.a,alt:"Download metamask",className:n})))))},Fa=Object(wt.a)((function(e){return{root:{border:"none",marginTop:e.mixins.toolbar.minHeight,marginBottom:e.spacing(4),minHeight:"calc(100vh - 286px)"}}})),La=function(e){var t=e.children,a=Fa().root,n=window.ethereum;return r.a.createElement("div",null,r.a.createElement(Oa,null),r.a.createElement(Rt.a,{maxWidth:"xl"},r.a.createElement(Ot.a,{className:a},n?t:r.a.createElement(Ba,null))),r.a.createElement(Ia,null))},za=Object(wt.a)((function(e){return{root:{backgroundColor:e.palette.background.secondary,padding:e.spacing(2,0),position:"relative","&:before":{content:"''",display:"block",width:"200vw",height:"100%",position:"absolute",top:"0",left:"-100vw",backgroundColor:e.palette.background.secondary,zIndex:"-1"}},title:{fontSize:"24px",lineHeight:"1.75rem",fontWeight:300},description:{fontSize:"14px",lineHeight:"1.25rem",fontWeight:400},textImgWrapper:{position:"relative",height:"100%",overflow:"visible","& img":{height:"140px",width:"auto",position:"absolute",bottom:e.spacing(-2),left:"75%"}},h100:{height:"100%"}}}));function Pa(e){var t=e.title,a=e.description,n=e.img,i=e.cta,s=za();return r.a.createElement(jt.a,{container:!0,direction:"row",justify:"space-between",className:s.root},r.a.createElement(Ca.a,{in:!0,style:{transitionDelay:"300ms"}},r.a.createElement(jt.a,{item:!0,lg:8,xl:6,className:s.textImgWrapper},r.a.createElement(jt.a,{container:!0,direction:"row",spacing:2},r.a.createElement(jt.a,{item:!0,lg:8,xl:9},r.a.createElement(jt.a,{container:!0,direction:"column",justify:"flex-start",className:s.h100},r.a.createElement(jt.a,{item:!0,mb:1},r.a.createElement(Ut.a,{variant:"h2",className:s.title},t)),r.a.createElement(jt.a,{item:!0},r.a.createElement(Ut.a,{variant:"h5",className:s.description},a)))),r.a.createElement(jt.a,{item:!0,lg:4,xl:3},r.a.createElement("img",{src:n,alt:"Model description image"}))))),i?r.a.createElement(Ca.a,{in:!0,style:{transitionDelay:"500ms"}},r.a.createElement(jt.a,{item:!0,lg:4,xl:6},r.a.createElement(jt.a,{container:!0,direction:"row",justify:"center",alignItems:"center",className:s.h100},i))):r.a.createElement(r.a.Fragment,null))}var Ha=a(1022),Wa=a(4),qa=a(998),Ka=a(1026),Va=a(999),$a=a(997),Za=a(202),Ga=a.n(Za),Ya=a(209),Xa=a(1029),Qa=Object(wt.a)((function(e){return{videoTag:{cursor:"default",overflow:"hidden",backgroundColor:"black",color:"white",opacity:.6,padding:e.spacing(.7),fontWeight:"bold"}}}));var Ja=function(e){var t=e.label,a=e.boxProps,i=void 0===a?{}:a,s=Qa().videoTag,o=Object(n.useRef)(null),c=Object(n.useState)(!1),l=Object(ae.a)(c,2),u=l[0],d=l[1];Object(n.useEffect)((function(){var e;return((e=o.current).offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth)&&d(!0),function(){}}),[]);var f=r.a.createElement(Ot.a,Object.assign({position:"absolute"},i),r.a.createElement(Ut.a,{ref:o,className:s,variant:"subtitle2",noWrap:!0},t));return u?r.a.createElement(Xa.a,{arrow:!0,title:r.a.createElement(Ut.a,{variant:"subtitle2"},t)},f):f},en=a(442),tn=a.n(en),an=a(443),nn=a.n(an),rn={af:"Afrikaans","af-za":"Afrikaans - South Africa",ar:"Arabic","ar-ae":"Arabic - United Arab Emirates","ar-bh":"Arabic - Bahrain","ar-dz":"Arabic - Algeria","ar-eg":"Arabic - Egypt","ar-iq":"Arabic - Iraq","ar-jo":"Arabic - Jordan","ar-kw":"Arabic - Kuwait","ar-lb":"Arabic - Lebanon","ar-ly":"Arabic - Libya","ar-ma":"Arabic - Morocco","ar-om":"Arabic - Oman","ar-qa":"Arabic - Qatar","ar-sa":"Arabic - Saudi Arabia","ar-sy":"Arabic - Syria","ar-tn":"Arabic - Tunisia","ar-ye":"Arabic - Yemen",az:"Azeri","az-az":"Cyrl Azeri (Cyrillic) - Azerbaijan","az-az-latn":"Azeri (Latin) - Azerbaijan",be:"Belarusian","be-by":"Belarusian - Belarus",bg:"Bulgarian","bg-bg":"Bulgarian - Bulgaria",ca:"Catalan","ca-es":"Catalan - Catalan",cs:"Czech","cs-cz":"Czech - Czech Republic",da:"Danish","da-dk":"Danish - Denmark",de:"German","de-at":"German - Austria","de-ch":"German - Switzerland","de-de":"German - Germany","de-li":"German - Liechtenstein","de-lu":"German - Luxembourg",div:"Dhivehi","div-mv":"Dhivehi - Maldives",el:"Greek","el-gr":"Greek - Greece",en:"English","en-au":"English - Australia","en-bz":"English - Belize","en-ca":"English - Canada","en-cb":"English - Caribbean","en-gb":"English - United Kingdom","en-ie":"English - Ireland","en-jm":"English - Jamaica","en-nz":"English - New Zealand","en-ph":"English - Philippines","en-tt":"English - Trinidad and Tobago","en-us":"English - United States","en-za":"` English - South Africa","en-zw":"English - Zimbabwe",es:"Spanish","es-ar":"Spanish - Argentina","es-bo":"Spanish - Bolivia","es-cle":"Spanish - Chile","es-co":"Spanish - Colombia","es-cr":"Spanish - Costa Rica","es-do":"Spanish - Dominican Republic","es-ec":"Spanish - Ecuador","es-es":"Spanish - Spain","es-gt":"Spanish - Guatemala","es-hn":"Spanish - Honduras","es-mx":"Spanish - Mexico","es-ni":"Spanish Spanish - Nicaragua","es-pa":"Spanish - Panama","es-pe":"Spanish - Peru","es-pr":"Spanish - Puerto Rico","es-py":"Spanish - Paraguay","es-sv":"Spanish - El Salvador","es-uy":"Spanish - Uruguay","es-ve":"Spanish - Venezuela","es-419":"Spanish - Latin America",et:"Estonian","et-ee":"Estonian - Estonia",eu:"Basque","eu-es":"Basque - Basque",fa:"Farsi","fa-ir":"Farsi - Iran",fi:"Finnish","fi-fi":"Finnish - Finland",fo:"Faroese","fo-fo":"Faroese - Faroe Islands",fr:"French","fr-be":"French - Belgium","fr-ca":"French - Canada","fr-ch":"French - Switzerland","fr-fr":"French - France","fr-lu":"French - Luxembourg","fr-mc":"French - Monaco",gl:"Galician","gl-es":"Galician - Galician",gu:"Gujarati","gu-in":"Gujarati - India",he:"Hebrew","he-il":"Hebrew - Israel",hi:"Hindi","hi-in":"Hindi - India",hr:"Croatian","hr-hr":"Croatian - Croatia",hu:"Hungarian","hu-hu":"Hungarian - Hungary",hy:"Armenian","hy-am":"Armenian - Armenia",id:"Indonesian","id-id":"Indonesian - Indonesia",is:"Icelandic","is-is":"Icelandic - Iceland",it:"Italian","it-ch":"Italian Italian - Switzerland","it-it":"Italian - Italy",ja:"Japanese","ja-jp":"Japanese - Japan",ka:"Georgian","ka-ge":"Georgian - Georgia",kk:"Kazakh","kk-kz":"Kazakh - Kazakhstan",kn:"Kannada","kn-in":"Kannada - India",ko:"Korean",kok:"Konkani","kok-in":"Konkani - India","ko-kr":"Korean - Korea",ky:"Kyrgyz","ky-kg":"Kyrgyz - Kyrgyzstan",lt:"Lithuanian","lt-lt":"Lithuanian - Lithuania",lv:"Latvian","lv-lv":"Latvian - Latvia",mk:"Macedonian","mk-mk":"Macedonian - Former Yugoslav Republic of","":"Macedonia",mn:"Mongolian","mn-mn":"Mongolian - Mongolia",mr:"Marathi","mr-in":"Marathi - India",ms:"Malay","ms-bn":"Malay - Brunei","ms-my":"Malay - Malaysia","nb-no":"Norwegian (Bokm?l) - Norway",nl:"Dutch","nl-be":"Dutch - Belgium","nl-nl":"Dutch - The Netherlands","nn-no":"Norwegian (Nynorsk) - Norway",no:"Norwegian",pa:"Punjabi","pa-in":"Punjabi - India",pl:"Polish","pl-pl":"Polish - Poland",pt:"Portuguese","pt-br":"Portuguese - Brazil","pt-pt":"Portuguese - Portugal",ro:"Romanian","ro-ro":"Romanian - Romania",ru:"Russian","ru-ru":"Russian - Russia",sa:"Sanskrit","sa-in":"Sanskrit - India",sk:"Slovak","sk-sk":"Slovak - Slovakia",sl:"Slovenian","sl-si":"Slovenian - Slovenia",sq:"Albanian","sq-al":"Albanian - Albania","sr-sp-cyrl":"Serbian (Cyrillic) - Serbia","sr-sp-latn":"Serbian (Latin) - Serbia",sv:"Swedish","sv-fi":"Swedish - Finland","sv-se":"Swedish - Sweden",sw:"Swahili","sw-ke":"Swahili - Kenya",syr:"Syriac","syr-sy":"Syriac - Syria",ta:"Tamil","ta-in":"Tamil - India",te:"Telugu","te-in":"Telugu - India",th:"Thai","th-th":"Thai - Thailand",tr:"Turkish","tr-tr":"Turkish - Turkey",tt:"Tatar","tt-ru":"Tatar - Russia",uk:"Ukrainian","uk-ua":"Ukrainian - Ukraine",ur:"Urdu","ur-pk":"Urdu - Pakistan",uz:"Uzbek","uz-uz-cyrl":"Uzbek (Cyrillic) - Uzbekistan","uz-uz-latn":"Uzbek (Latin) - Uzbekistan",vi:"Vietnamese","zh-cht":"Chinese (Traditional)","zh-chs":"Chinese (Simplified)","zh-cn":"Chinese - China","zh-hk":"Chinese - Hong Kong SAR","zh-mo":"Chinese - Macao SAR","zh-sg":"Chinese - Singapore","zh-tw":"Chinese - Taiwan"},sn=Object(wt.a)((function(e){return{imageWrapper:{width:"150px",height:"150px"},media:{height:0,paddingTop:"56.25%"},playButton:{position:"absolute",cursor:"pointer",top:"50%",left:"50%",fontSize:80,color:Ya.a.A700,transition:"transform 0.2s",transform:"translate(-50%, -50%)","&:hover":{transform:"scale(1.1) translate(-50%, -50%)"}}}})),on=function(e){var t=e.video,a=void 0===t?{}:t,n=e.targetLanguage,i=e.onClickHandler,s=sn(),o=s.media,c=s.playButton,l=a.thumbnail,u=a.duration,d=a.title,f=a.all_urls,m=Math.floor(u/60),b=u%60,p="".concat(m,":").concat(b<10?"0".concat(b):b);return r.a.createElement(Ot.a,{position:"relative",onClick:i},Object.keys(a).length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ja,{label:rn[n],boxProps:{top:0,left:0,maxWidth:.5}}),r.a.createElement(Ja,{label:p,boxProps:{top:0,right:0}}),r.a.createElement($a.a,{className:o,image:l||tn.a},r.a.createElement("a",{href:f?f[0]:"#",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(Ga.a,{className:c}))),r.a.createElement(Ja,{label:d,boxProps:{left:0,bottom:0,maxWidth:1}})):r.a.createElement($a.a,{className:o,image:nn.a}))},cn=a(81),ln=a.n(cn),un=a(444),dn=a.n(un);ln.a.extend(dn.a);var fn=Object(wt.a)((function(e){return{detailText:{fontSize:12,marginBottom:e.spacing(.5)},detailWrapper:{fontSize:13,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"}}})),mn=function(e){var t=e.name,a=e.value,n=fn().detailWrapper;return r.a.createElement(Ot.a,null,r.a.createElement(Ut.a,{className:n,variant:"body2",gutterBottom:!0},r.a.createElement("strong",null,t,": "),a||"No Available"))},bn=function(e){var t=e.task,a=e.video,n=void 0===a?{}:a,i=fn().detailText,s=t.due_date,o=n.title,c=n.languages,l=n.team,u=n.primary_audio_language_code,d=c?c.filter((function(e){return e.published})).map((function(e){return e.name.replace(","," -")})):null,f=d&&0!==d.length?1===d.length?"".concat(d[0]):"".concat(d.slice(0,-1).join(", ")," and ").concat(d.slice(-1)):"No subtitles published",m=ln()(s).isValid()?"".concat(ln()(s).format("YYYY-MM-DD HH:mm")," \n    (").concat(ln()().to(s),")"):"No due date";return r.a.createElement(Ot.a,null,r.a.createElement(Ut.a,{className:i,variant:"body1",color:"textSecondary",gutterBottom:!0},"DETAILS"),r.a.createElement(mn,{name:"Team",value:l}),r.a.createElement(mn,{name:"Source team",value:l}),r.a.createElement(mn,{name:"Video",value:o}),r.a.createElement(mn,{name:"Video language",value:u&&rn[u]}),r.a.createElement(mn,{name:"Subtitle language",value:f}),r.a.createElement(mn,{name:"Request due date",value:m}))},pn=a(445),gn=a.n(pn),yn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,t=arguments.length>1?arguments[1]:void 0,a=Object(n.useRef)(),r=Object(n.useRef)(),i=Object(n.useRef)(),s=Object(n.useRef)(!1),o=Object(n.useCallback)((function(n){if(!s.current){if(void 0!==r.current){var c=n-r.current;i.current+=c,i.current>e&&(t(i.current),i.current=0)}else i.current=0;r.current=n,a.current=requestAnimationFrame(o)}}),[t,e]);Object(n.useEffect)((function(){a.current=requestAnimationFrame(o)}),[o]);var c=function(){cancelAnimationFrame(a.current),s.current=!0};return c},hn=[["years","year"],["months","month"],["days","day"],["hours","hour"],["minutes","minute"],["seconds","second"]],vn=["years","months","days","hours","minutes","seconds"];function kn(e,t){var a=!1;"#"===e[0]&&(e=e.slice(1),a=!0);var n=parseInt(e,16),r=(n>>16)+t;r>255?r=255:r<0&&(r=0);var i=(n>>8&255)+t;i>255?i=255:i<0&&(i=0);var s=(255&n)+t;return s>255?s=255:s<0&&(s=0),(a?"#":"")+(s|i<<8|r<<16).toString(16)}var En=Object(wt.a)((function(e){return{timer:Object(Ue.a)({whiteSpace:"nowrap"},{WebkitTouchCallout:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"}),clockIconWrapper:{display:"flex",alignItems:"center",marginTop:e.spacing(.1)},timeTextWrapper:{padding:"0 0 0 .25rem"},timeText:{fontSize:12},timeUnit:{display:"inline-flex",alignItems:"baseline",minWidth:31},separator:{marginTop:0,marginRight:e.spacing(.3),marginLeft:e.spacing(.3),fontWeight:400}}})),Tn={yMdhms:"yMdhms",yMdhm:"yMdhm",yMdh:"yMdh",yMd:"yMd",yM:"yM",Mdhms:"Mdhms",Mdhm:"Mdhm",Mdh:"Mdh",Md:"Md",dhms:"dhms",dhm:"dhm",hms:"hms",hm:"hm",ms:"ms",m:"m",s:"s"},jn={y:"years",M:"months",d:"days",h:"hours",m:"minutes",s:"seconds"};function On(e,t,a,n,r){var i=t||new Date,s=t?new Date:e,o=ln()(i).diff(s,"seconds"),c=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.units||vn,r=a.maxUnits||-1,i=-1===r&&a.keepLeadingZeros||!1,s=t>e?e:t,o=function(){return[].concat(hn).reverse().find((function(e){var t=Object(ae.a)(e,1)[0];return n.includes(t)}))[0]};return hn.reduce((function(e,t,a){var c=Object(ae.a)(t,2),l=c[0],u=c[1];return e[l]=null,(-1===r||e.remainingUnits>0)&&n.includes(l)&&(e[l]=e.remaining.diff(s,u),e.remaining=e.remaining.subtract(e[l],u)),i||e.seenNonZero||(0===e[l]?e[l]=null:e.seenNonZero=!0),e.remainingUnits>0&&e.seenNonZero&&(e.remainingUnits-=1),a===hn.length-1&&(delete e.remaining,delete e.remainingUnits,delete e.seenNonZero,Object.values(e).every((function(e){return null===e}))&&(e[o()]=0)),e}),{remaining:ln()(s===e?t:e),remainingUnits:r,seenNonZero:!1})}(i,s,{keepLeadingZeros:n,maxUnits:r,units:a});return{units:[["Y",c.years],["M",c.months],["D",c.days],["H",c.hours],["M",c.minutes],["S",c.seconds]],totalInSeconds:o}}var Sn=function(e){var t,a=e.start,i=e.end,s=e.format,o=void 0===s?Tn.hms:s,c=e.showEmpty,l=void 0!==c&&c,u=e.maxUnits,d=void 0===u?-1:u,f=e.showIcon,m=void 0===f||f,b=e.onTimeOut,p=void 0===b?function(){}:b,g=En(),y=g.timer,h=g.clockIconWrapper,v=g.timeUnit,k=g.separator,E=g.timeTextWrapper,T=g.timeText,j=(Object(It.a)(),Object(n.useRef)(!1)),O=Object(n.useMemo)((function(){return function(e){return["y","M","d","h","m","s"].reduce((function(t,a){return Tn[e].includes(a)?[].concat(Object(Ge.a)(t),[jn[a]]):t}),[])}(o)}),[o]),S=Object(n.useState)(On(a,i,O,l,d)),A=Object(ae.a)(S,2),w=A[0],I=A[1],C=w.totalInSeconds,_=w.units,x=_.reduce((function(e,t,a){return null===t[1]?e:a}),0),R=Object(n.useCallback)((function(){var e=On(a,i,O,l,d);0===e.totalInSeconds&&p(),j.current&&I(e)}),[a,i,O,l,d,p]),N=yn(1e3,R);return Object(n.useEffect)((function(){return j.current=!0,function(){j.current=!1,N()}}),[]),C<0||Object.is(C,-0)?r.a.createElement(Ut.a,{variant:"body2"},i?"Time out":"\u2212"):r.a.createElement("time",{className:y,dateTime:(t=i||a,ln()(t).toISOString())},r.a.createElement(jt.a,{container:!0,direction:"row",alignItems:"center",justify:"center"},r.a.createElement(jt.a,{item:!0},m&&r.a.createElement("span",{className:h},r.a.createElement(gn.a,{style:{fontSize:20}}))),r.a.createElement(jt.a,{item:!0,className:E},r.a.createElement(Ut.a,{variant:"subtitle1"},_.map((function(e,t){var a,n=t===x,i=t===_.length-1,s=t>=_.length-3;return null===e[1]?null:r.a.createElement(r.a.Fragment,{key:t},r.a.createElement("span",{className:i?Object(Sa.a)(T,v):T},(a=e[1],String(a).padStart(2,"0")),r.a.createElement(Ot.a,{component:"span",ml:.2},e[0])),!n&&r.a.createElement("span",{className:k},s&&":"))}))))))},An=Object(wt.a)((function(){return{actionButton:{background:function(e){return e.color},color:"white",fontWeight:"bold",borderRadius:0,"&:hover":{backgroundColor:function(e){return e.hoverColor}}}}}));var wn=function(e){var t=e.label,a=e.color,n=e.variant,i=e.fullWidth,s=void 0!==i&&i,o=e.disabled,c=void 0!==o&&o,l=e.onClick,u=Object(Wa.a)(e,["label","color","variant","fullWidth","disabled","onClick"]),d=An({color:a,hoverColor:kn(a,-20)}).actionButton;return r.a.createElement(Vt.a,Object.assign({variant:n,className:d,onClick:l,fullWidth:s,disabled:c},u),t)},In=Object(wt.a)((function(e){return{root:{minWidth:280},chip:{backgroundColor:function(e){return e.priorityColor}},cardContent:{padding:0,paddingTop:e.spacing(2)}}})),Cn=function(e){var t=e.task,a=e.video,n=e.actionButtons,i=void 0===n?[]:n,s=e.onTaskTimeout,o=void 0===s?function(){}:s,c=t.contractData,l=c.endDate,u=function(e){switch(e){case e<=5:return"high";case e>5<=30:return"medium";case e>30:default:return"low"}}(c.reallocationTime),d=Object(It.a)().palette,f=In({priorityColor:d.chips[u]}),m=f.root,b=f.chip,p=f.cardContent,g=(f.timer,!(1===i.length&&"translate"===i[0].label.toLowerCase())&&t.contractData.endDate);new Date(Date.now()+1999).toLocaleTimeString(),new Date(1e3*t.contractData.endDate).toLocaleTimeString();return 1e3*t.contractData.endDate<=Date.now()+1999?null:r.a.createElement(qa.a,{className:m,elevation:0},r.a.createElement(Ot.a,{mb:.5,pt:1},r.a.createElement(jt.a,{container:!0,direction:"row",justify:g?"space-between":"flex-end",alignItems:"center"},g?r.a.createElement(jt.a,{item:!0},r.a.createElement(Sn,{end:new Date(1e3*l),onTimeOut:function(){console.log("        ".concat(t.contractData.id," I'm substractiing!")),o()}})):null,r.a.createElement(jt.a,{item:!0},r.a.createElement(Ka.a,{className:b,color:"secondary",label:r.a.createElement("strong",null,u," priority")})))),r.a.createElement(on,{video:a,targetLanguage:t.language}),r.a.createElement(Va.a,{className:p},r.a.createElement(bn,{task:t,video:a}),r.a.createElement(Ot.a,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",mt:2},i.map((function(e,a,n){var i=e.label,s=e.color,o=e.variant,c=e.actionHandler,l=e.disabled,u=Object(Wa.a)(e,["label","color","variant","actionHandler","disabled"]);return r.a.createElement(wn,Object.assign({key:i,label:i,color:s,variant:o,fullWidth:1===n.length,disabled:l,onClick:function(){return c(t)}},u))})))))},_n=function(e){var t=e.tasks,a=e.videoRegistry,n=e.totalPages,i=void 0===n?1:n,s=e.actionButtons,o=e.onChangePage;return r.a.createElement(jt.a,{container:!0,direction:"column",justify:"center",alignItems:t.length>1?"center":"flex-start"},r.a.createElement(jt.a,{item:!0},r.a.createElement(jt.a,{container:!0,direction:"row",alignItems:"center",justify:"space-between",spacing:5},t.map((function(e){return r.a.createElement(jt.a,{item:!0,key:e.job_id},r.a.createElement(Cn,{task:e,video:a.get(e.video),actionButtons:s}))})))),i>1&&r.a.createElement(jt.a,{item:!0},r.a.createElement(Ot.a,{mt:5},r.a.createElement(Ha.a,{count:i,shape:"round",color:"primary",onChange:function(e,t){return o(t)}}))))},xn=function(e){var t=e.tasks,a=e.videoRegistry,n=e.totalPages,i=void 0===n?1:n,s=e.actionButtons,o=e.onChangePage,c=e.onTaskTimeout;return r.a.createElement(jt.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},r.a.createElement(jt.a,{item:!0},r.a.createElement(jt.a,{container:!0,direction:"row",alignItems:"center",justify:"flex-start",spacing:5},t.map((function(e){return r.a.createElement(jt.a,{item:!0,key:e.job_id},r.a.createElement(Cn,{task:e,video:a.get(e.video),actionButtons:s,onTaskTimeout:c}))})))),i>1&&r.a.createElement(jt.a,{item:!0},r.a.createElement(Ot.a,{mt:5},r.a.createElement(Ha.a,{count:i,shape:"round",color:"primary",onChange:function(e,t){return o(t)}}))))},Rn=Object(wt.a)((function(e){return{title:{fontSize:"50px",lineHeight:"50px",fontWeight:100},description:{fontSize:"14px",lineHeight:"1.25rem",fontWeight:400}}}));var Nn,Mn,Dn=function(e){var t=e.model,a=void 0===t?_e[0].name:t,i=e.tasks,s=void 0===i?[]:i,o=e.videoRegistry,c=void 0===o?new Map:o,l=e.title,u=e.description,d=void 0===u?"":u,f=e.taskActionButtons,m=void 0===f?[]:f,b=e.onTaskTimeout,p=void 0===b?function(){}:b,g=Rn(),y=Object(n.useRef)(null),h=Object(n.useState)(1),v=Object(ae.a)(h,2),k=v[0],E=v[1],T=Object(n.useMemo)((function(){return function(e,t){if(!e)return[];var a=4*(t-1),n=a+4;return e.slice(a,n)}(s,k)}),[s,k]),j=s?Math.ceil(s.length/4):0,O=function(e){y.current.scrollIntoView({inline:"start",behavior:"smooth"});E(e)};return r.a.createElement(jt.a,{container:!0,direction:"column"},r.a.createElement(jt.a,{item:!0},r.a.createElement(Ot.a,{mb:1,ref:y},r.a.createElement(Ut.a,{variant:"h3",className:g.title},l)),r.a.createElement(Ot.a,null,r.a.createElement(Ut.a,{variant:"h5",className:g.description},d))),s?r.a.createElement(jt.a,{item:!0},a==_e[0].name?r.a.createElement(_n,{tasks:T,videoRegistry:c,actionButtons:m,totalPages:j,totalTasks:s.length,tasksPerPage:4,onChangePage:O}):r.a.createElement(xn,{tasks:T,videoRegistry:c,actionButtons:m,totalPages:j,totalTasks:s.length,tasksPerPage:4,onChangePage:O,onTaskTimeout:p})):null)},Un=a(1e3),Bn=Object(wt.a)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},titleWrapper:{display:"flex",alignItems:"center"},modalTitle:{marginLeft:e.spacing(1),color:function(t){return"error"===t.type?e.palette.secondary.light:e.palette.primary.light}},operationTitle:{fontWeight:700},opacityWrapper:{opacity:.5},activatingProgress:{position:"absolute",top:"45%",left:"45%"},opacityBackground:{backgroundColor:e.palette.grey,cursor:function(e){return e.activating?"":"pointer"}}}})),Fn=function(e){var t=e.modalContent,a=e.activating,n=void 0===a||a,i=e.open,s=e.onClose,o=t||{},c=o.title,l=o.message,u=o.createTransactionHandler,d=Bn(n),f=d.titleWrapper,m=d.operationTitle,b=d.modalTitle,p=d.closeButton,g=d.opacityWrapper,y=d.activatingProgress,h=d.opacityBackground;return r.a.createElement($t.a,{open:i,onClose:s},r.a.createElement("div",{className:h},r.a.createElement("div",{className:n?g:null},r.a.createElement(Zt.a,null,r.a.createElement("div",{className:f},r.a.createElement(ga.a,{color:"primary",fontSize:"large"}),r.a.createElement("span",{className:b},"Perform operation:"," ",r.a.createElement("span",{className:m},c))),r.a.createElement(Gt.a,{"aria-label":"close",className:p,onClick:s},r.a.createElement(Qt.a,null))),r.a.createElement(Yt.a,null,r.a.createElement(fa.a,null,l),r.a.createElement(Un.a,null,r.a.createElement(Vt.a,{variant:"outlined",color:"primary",onClick:u,disabled:n},"Create Transaction"))))),n&&r.a.createElement(At.a,{className:y}))},Ln=function(){return r.a.createElement(Na,{title:"Demo user not found"},r.a.createElement(jt.a,{item:!0},r.a.createElement(Ot.a,{mt:3,ml:1},r.a.createElement(Ut.a,{variant:"body1"},"It seems the link you received isn't valid. Please ask the research team for a valid one."))))},zn=a(141),Pn=a.n(zn),Hn=ze.AcceptTask,Wn=Object(wt.a)((function(e){return{root:{flexGrow:1},taskSection:{},toastMessage:{display:"flex",justifyContent:"center",alignItems:"center"},iconLoadingState:{color:"white",marginRight:e.spacing(1)},disabledModal:{opacity:.4}}})),qn={title:"Accept Assignment",message:"You need to create and confirm a transaction in order to accept this assignment."},Kn=function(e){return r.a.createElement(Tt.a,Object.assign({},e,{direction:"up"}))},Vn=function(e){return r.a.createElement(Tt.a,Object.assign({},e,{direction:"left"}))},$n=function(){var e=Object(It.a)(),t=Wn(),a=t.root,i=t.taskSection,s=t.toastMessage,o=t.iconLoadingState,c=t.disabledModal,l=Object(f.c)().account,u=Object(De.h)().pathname,d=Ne(),m=d.modelName,b=d.setModel,p=$e(u,"userId"),g=$e(u,"model"),y=yt(p),h=y.user,v=y.tasks,k=y.acceptedTask,E=y.videosRegistry,T=y.loading,j=Object(n.useRef)(!1),O=Object(n.useState)(!1),S=Object(ae.a)(O,2),A=S[0],w=S[1],I=Object(n.useState)(null),C=Object(ae.a)(I,2),_=C[0],x=C[1],R=Object(n.useState)(!1),N=Object(ae.a)(R,2),M=N[0],D=N[1],U=Object(n.useState)(!1),B=Object(ae.a)(U,2),F=B[0],L=B[1],z=Object(n.useState)(!0),P=Object(ae.a)(z,2),H=P[0],W=P[1],q=Object(n.useState)(!1),K=Object(ae.a)(q,2),V=K[0],$=K[1],Z=Object(n.useState)({}),G=Object(ae.a)(Z,2),Y=G[0],X=G[1],Q=Object(n.useState)(!1),J=Object(ae.a)(Q,2),ee=J[0],te=J[1],ne=_e.find((function(e){return e.name==m}));Object(n.useEffect)((function(){return b(g),function(){}}),[]),Object(n.useEffect)((function(){return j.current||T||(setTimeout((function(){return W(!1)}),700),j.current=!0),function(){}}),[T]);var re=Et((function(e,t){"success"!==e&&"error"!==e||te(!1);var a={type:e},n=Ke(e);Ve(t);a.message=r.a.createElement("span",null,n),L(!1),D(!1),X(a),$(!0)})),ie=function(e,t){var a=He(t);te(!0),re[a](p,e.contractData.id),L(!0)},se=[{label:"Accept",color:e.palette.success.main,variant:"contained",actionHandler:function(e){if(l){var t=Object(Ue.a)({},qn);t.createTransactionHandler=function(){return ie(e,Hn)},x(t),D(!0)}else w(!0)}}],oe=se.map((function(e){return Object(Ue.a)(Object(Ue.a)({},e),{},{disabled:!0})})),ce=[{label:"Translate",color:e.palette.translateButton,variant:"contained",actionHandler:function(e){console.log("Translating task..."),bt.teams.updateSubtitleRequest(h.teams[0].name,e.job_id,p).then((function(){window.open(Be(e),"_blank")}),(function(e){return console.error("A problem has ocurred trying to update assignment using Amara API",e)}))}}];return h?Object.keys(h).length?r.a.createElement(La,{className:a},r.a.createElement(jt.a,{container:!0,direction:"column",justify:"space-evenly",alignItems:"center"},r.a.createElement(Pa,{title:ne.displayName,description:ne.description,img:Pn.a}),k?r.a.createElement(jt.a,{container:!0,className:i},r.a.createElement(jt.a,{item:!0},r.a.createElement(Ot.a,{mt:v?2:0,width:"100"},r.a.createElement(Dn,{tasks:[k],videoRegistry:E===[]?null:E,title:"You have this task selected",description:"",taskActionButtons:ce})))):!T&&r.a.createElement(jt.a,{container:!0,className:i},r.a.createElement(jt.a,{item:!0},r.a.createElement(Ot.a,{mt:v?2:0,width:"100"},r.a.createElement(Dn,{tasks:0==v.length?[]:v,videoRegistry:E===[]?null:E,title:ee?"Processing your request...":v.length<=0?"No tasks available":1===v.length?"This task is currently assigned to you":"These tasks are currently assigned to you",description:"",taskActionButtons:ee?oe:se}))))),r.a.createElement(St.a,{open:V,anchorOrigin:{vertical:"bottom",horizontal:"right"},TransitionComponent:Vn,transitionDuration:500,autoHideDuration:3e3,onClose:function(e,t){"clickaway"!==t&&$(!1)},key:"bottomright"},r.a.createElement(Ct.a,{severity:Y.type||"info"},Y.message)),r.a.createElement(St.a,{open:H,TransitionComponent:Kn,transitionDuration:500,onClose:function(){return setTimeout((function(){}),1e3)}},r.a.createElement(Ct.a,{icon:!1,variant:"filled",color:"info"},r.a.createElement("div",{className:s},T?r.a.createElement(At.a,{className:o,size:20,thickness:5}):r.a.createElement(xt.a,{className:o}),"Loading your assingments!"))),r.a.createElement(Fn,{className:c,modalContent:_,open:M,activating:F,onClose:function(){return D(!1)},onCreateTransaction:function(){return ie()}}),r.a.createElement(ka,{type:"error",title:"You can't perform this action",message:"Check you have Metamask installed and you're connected to your account.",open:A,onClose:function(){return w(!1)}})):r.a.createElement(Ln,null):null},Zn={NonExistent:Symbol("NON_EXISTENT"),Available:Symbol("AVAILABLE"),Accepted:Symbol("ACCEPTED"),Completed:Symbol("COMPLETED")},Gn=(Nn={},Object(Le.a)(Nn,Zn.NonExistent,"NonExistent"),Object(Le.a)(Nn,Zn.Available,"Available"),Object(Le.a)(Nn,Zn.Accepted,"Accepted"),Object(Le.a)(Nn,Zn.Completed,"Completed"),Nn);Mn={},Object(Le.a)(Mn,Zn.NonExistent,0),Object(Le.a)(Mn,Zn.Available,1),Object(Le.a)(Mn,Zn.Accepted,2),Object(Le.a)(Mn,Zn.Completed,3);function Yn(e,t){return Xn.apply(this,arguments)}function Xn(){return(Xn=Object(q.a)(W.a.mark((function e(t,a){var n,r,i,s,o,c,l;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.teams,r=a.apiKey,!(n&&n.length&&t&&t.length)){e.next=11;break}return i=n[0].name,bt.setApiKeyHeader(r),s=t.map((function(e){var t=e.id;return bt.teams.getTeamSubtitleRequest(i,t)})),e.next=7,Promise.all(Object(Ge.a)(s));case 7:return o=e.sent,c=o.map((function(e){return e.data})),l=Je(t,c),e.abrupt("return",l);case 11:return e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qn=function(e){var t=at(e),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{first:50,skip:0},a=t.first,n=t.skip,r=Ne(),i=r.modelName,s=_e.find((function(e){return e.name===i})),o=Object(et.a)(s.requests.tasksAssigned,{variables:{userId:e,first:a,skip:n},pollInterval:2e3,fetchPolicy:"network-only"}),c=o.data,l=(o.loading,o.error),u=o.stopPolling;return l&&(u(),console.log(l)),c?c.tasks:void 0}(e),r=rt(e),i=Object(n.useState)(),s=Object(ae.a)(i,2),o=s[0],c=s[1],l=Object(n.useState)(),u=Object(ae.a)(l,2),d=u[0],f=u[1],m=Object(n.useState)(),b=Object(ae.a)(m,2),p=b[0],g=b[1],y=Object(n.useState)(new Map),h=Object(ae.a)(y,2),v=h[0],k=h[1];return Object(n.useEffect)((function(){var a=!0;function n(){return(n=Object(q.a)(W.a.mark((function e(n){var r,i,s;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,bt.users.getOne(n);case 3:r=e.sent,i=Object(Ue.a)({},r.data),s=Object(Ue.a)(Object(Ue.a)({},t),i),a&&c(s),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}return function(e){n.apply(this,arguments)}(e),function(){a=!1}}),[e,t]),Object(n.useEffect)((function(){function e(){return(e=Object(q.a)(W.a.mark((function e(t){var a,n,r,i;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.teams,e.next=3,bt.videos.getAll({team:a[0].name});case 3:n=e.sent,r=n.data.objects,i=it(r),k(i);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if(o&&o.teams&&o.teams.length)return function(t){e.apply(this,arguments)}(o),function(){}}),[o]),Object(n.useEffect)((function(){if(o&&a)return Yn(a,o).then((function(e){f(e)})),function(){}}),[o,a]),Object(n.useEffect)((function(){if(o&&r)return Yn(r,o).then((function(e){g(e[0]?e[0]:null)})),function(){}}),[o,r]),{user:o,tasks:d,acceptedTask:p||null,videosRegistry:v,loading:!o||!v||!d||void 0===p}},Jn=ze.AcceptTask,er=ze.RejectTask;var tr=function(e){var t=Object(f.c)(),a=t.account,r=t.library,i=Ne(),s=i.contractAddress,o=i.modelContractInstance,c=vt(),l=Object(ae.a)(c,2),u=l[0],d=l[1],m=d.data,b=m.txHash,p=m.receipt,g=d.loading,y=d.error,h=Object(n.useState)(),v=Object(ae.a)(h,2),k=v[0],E=v[1];return Object(n.useEffect)((function(){!b||g||p||y?b&&g&&!y||(b&&!g&&p&&!y?(e("success",k),E(null)):y&&(console.error(y),e("error",k))):e("info",k)}),[b,p,g,y]),{acceptTask:Object(n.useCallback)((function(t,n){var i=Xe(t),c=Xe(n),l={from:a,to:s,data:o.methods.acceptTask(i,c).encodeABI(),gas:45e4,gasPrice:2e9};try{u(r,l,!1),E(Jn)}catch(d){console.error("Could not create tx:",d),e("error",Jn)}}),[r,a,e]),rejectTask:Object(n.useCallback)((function(t,n){var i=Xe(t),c=Xe(n),l={from:a,to:s,data:o.methods.rejectTask(i,c).encodeABI(),gas:45e4,gasPrice:2e9};try{u(r,l,!1),E(er)}catch(d){console.error("Could not create tx:",d),e("error",er)}}),[r,a,e])}},ar=ze.AcceptTask,nr=ze.RejectTask,rr=Object(wt.a)((function(e){return{root:{flexGrow:1},taskSection:{},toastMessage:{display:"flex",justifyContent:"center",alignItems:"center"},iconLoadingState:{color:"white",marginRight:e.spacing(1)},disabledModal:{opacity:.4},rejectButton:{color:e.palette.error.main,textDecoration:"underline"}}})),ir={title:"Accept Assignment",message:"You need to create and confirm a transaction in order to accept this assignment."},sr={title:"Reject Assignment",message:"You need to create and confirm a transaction in order to reject this assignment."},or=function(e){return r.a.createElement(Tt.a,Object.assign({},e,{direction:"up"}))},cr=function(e){return r.a.createElement(Tt.a,Object.assign({},e,{direction:"left"}))},lr=function(){var e=Object(It.a)(),t=rr(),a=t.root,i=t.taskSection,s=t.toastMessage,o=t.iconLoadingState,c=t.disabledModal,l=t.rejectButton,u=Object(f.c)().account,d=Object(De.h)().pathname,m=Ne(),b=m.modelName,p=m.setModel,g=$e(d,"userId"),y=$e(d,"model"),h=Qn(g),v=h.user,k=h.tasks,E=h.acceptedTask,T=h.videosRegistry,j=h.loading,O=Object(n.useRef)(!1),S=Object(n.useState)(!1),A=Object(ae.a)(S,2),w=A[0],I=A[1],C=Object(n.useState)(null),_=Object(ae.a)(C,2),x=_[0],R=_[1],N=Object(n.useState)(!1),M=Object(ae.a)(N,2),D=M[0],U=M[1],B=Object(n.useState)(!1),F=Object(ae.a)(B,2),L=F[0],z=F[1],P=Object(n.useState)(!0),H=Object(ae.a)(P,2),W=H[0],q=H[1],K=Object(n.useState)(!1),V=Object(ae.a)(K,2),$=V[0],Z=V[1],G=Object(n.useState)({}),Y=Object(ae.a)(G,2),X=Y[0],Q=Y[1],J=Object(n.useState)(!1),ee=Object(ae.a)(J,2),te=ee[0],ne=ee[1],re=Object(n.useState)(0),ie=Object(ae.a)(re,2),se=ie[0],oe=ie[1],ce=_e.find((function(e){return e.name==b}));Object(n.useEffect)((function(){p(y)}),[]),Object(n.useEffect)((function(){if(k){var e=k.length;k.map((function(t){1e3*t.contractData.endDate<Date.now()&&e--})),oe(e)}}),[k]),Object(n.useEffect)((function(){if(!O.current&&!j){setTimeout((function(){return q(!1)}),700);O.current=!0}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;clearTimeout(e)}}),[j]);var le=tr((function(e,t){"success"!==e&&"error"!==e||ne(!1);var a={type:e},n=Ke(e);Ve(t);a.message=r.a.createElement("span",null,n),z(!1),U(!1),Q(a),Z(!0),t===le.AcceptTask&&oe(0)})),ue=function(e,t){var a=He(t);ne(!0),le[a](g,e.contractData.id),z(!0)},de=[{label:"Accept",color:e.palette.success.main,variant:"contained",actionHandler:function(e){if(u){var t=Object(Ue.a)({},ir);t.createTransactionHandler=function(){return ue(e,ar)},R(t),U(!0)}else I(!0)}}];b!=_e[1].name&&b!=_e[2].name||de.unshift({label:"Reject",color:e.palette.error.main,variant:"text",actionHandler:function(e){if(u){var t=Object(Ue.a)({},sr);t.createTransactionHandler=function(){return ue(e,nr)},R(t),U(!0)}else I(!0)},className:l});var fe=de.map((function(e){return Object(Ue.a)(Object(Ue.a)({},e),{},{disabled:!0})})),me=[{label:"Translate",color:e.palette.translateButton,variant:"contained",actionHandler:function(e){bt.teams.updateSubtitleRequest(v.teams[0].name,e.job_id,g).then((function(){window.open(Be(e),"_blank")}),(function(e){return console.error("A problem has ocurred trying to update assignment using Amara API",e)}))}}];return v?Object.keys(v).length?r.a.createElement(La,{className:a},r.a.createElement(jt.a,{container:!0,direction:"column",justify:"space-evenly",alignItems:"center"},r.a.createElement(Pa,{title:ce.displayName,description:ce.description,img:Pn.a}),E?r.a.createElement(jt.a,{container:!0,className:i},r.a.createElement(jt.a,{item:!0},r.a.createElement(Ot.a,{mt:k?2:0,width:"100"},r.a.createElement(Dn,{tasks:[E],videoRegistry:T===[]?null:T,title:"You have this task selected",description:"",emptyText:"No tasks available",taskActionButtons:me})))):!j&&r.a.createElement(jt.a,{container:!0,className:i},r.a.createElement(jt.a,{item:!0},r.a.createElement(Ot.a,{mt:k?2:0,width:"100"},r.a.createElement(Dn,{model:b,tasks:0==k.length?[]:k,videoRegistry:T===[]?null:T,title:te?"Processing your request...":se<=0?"No tasks available":1===se?"This task is currently assigned to you":"These tasks are currently assigned to you",description:"",taskActionButtons:te?fe:de,onTaskTimeout:function(){oe((function(e){return e-1}))}}))))),r.a.createElement(St.a,{open:$,anchorOrigin:{vertical:"bottom",horizontal:"right"},TransitionComponent:cr,transitionDuration:500,autoHideDuration:3e3,onClose:function(e,t){"clickaway"!==t&&Z(!1)},key:"bottomright"},r.a.createElement(Ct.a,{severity:X.type||"info"},X.message)),r.a.createElement(St.a,{open:W,TransitionComponent:or,transitionDuration:500,onClose:function(){return setTimeout((function(){}),1e3)}},r.a.createElement(Ct.a,{icon:!1,variant:"filled",color:"info"},r.a.createElement("div",{className:s},j?r.a.createElement(At.a,{className:o,size:20,thickness:5}):r.a.createElement(xt.a,{className:o}),"Loading your assingments!"))),r.a.createElement(Fn,{className:c,modalContent:x,open:D,activating:L,onClose:function(){return U(!1)},onCreateTransaction:function(){return ue()}}),r.a.createElement(ka,{type:"error",title:"You can't perform this action",message:"Check you have Metamask installed and you're connected to your account.",open:w,onClose:function(){return I(!1)}})):r.a.createElement(Ln,null):null},ur=ze.AcceptTask,dr=ze.RejectTask,fr=ze.SetUserCalendarRanges;var mr=function(e){var t=Object(f.c)(),a=t.account,r=t.library,i=Ne(),s=i.contractAddress,o=i.modelContractInstance,c=vt(),l=Object(ae.a)(c,2),u=l[0],d=l[1],m=d.data,b=m.txHash,p=m.receipt,g=d.loading,y=d.error,h=Object(n.useState)(),v=Object(ae.a)(h,2),k=v[0],E=v[1];return Object(n.useEffect)((function(){!b||g||p||y?b&&g&&!y||(b&&!g&&p&&!y?(e("success",k),E(null)):y&&(console.error(y),e("error",k))):e("info",k)}),[b,p,g,y]),{acceptTask:Object(n.useCallback)((function(t,n){var i=Xe(t),c=Xe(n),l={from:a,to:s,data:o.methods.acceptTask(i,c).encodeABI(),gas:45e4,gasPrice:2e9};try{u(r,l,!1),E(ur)}catch(d){console.error("Could not create tx:",d),e("error",ur)}}),[r,a,e]),rejectTask:Object(n.useCallback)((function(t,n){var i=Xe(t),c=Xe(n),l={from:a,to:s,data:o.methods.rejectTask(i,c).encodeABI(),gas:45e4,gasPrice:2e9};try{u(r,l,!1),E(dr)}catch(d){console.error("Could not create tx:",d),e("error",dr)}}),[r,a,e]),setUserCalendarRanges:Object(n.useCallback)((function(t,n,i){var c=Xe(t),l={from:a,to:s,data:o.methods.setUserCalendarRanges(c,n,i).encodeABI(),gas:45e4,gasPrice:2e9};try{u(r,l,!1),E(fr)}catch(d){console.error("Could not create tx:",d),e("error",fr)}}),[r,a,e])}},br=a(462),pr=a(454),gr=a(208),yr=a(455),hr=a(456),vr=Object(wt.a)((function(e){return{modalBox:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",boxShadow:24,p:4,backgroundColor:"#fff","& div.fc":{marginBottom:"1.5rem"},"& .fc-scrollgrid":{border:"none"},padding:"1rem"},closeButton:{color:e.palette.grey[500],position:"relative",top:"-.75rem",right:"-.75rem"},header1:{color:"#B3B5B8",fontSize:".75rem",fontWeight:"bold",letterSpacing:0,textTransform:"uppercase"},mainHeader:{color:"#333333",fontSize:"2rem",fontWeight:300,letterSpacing:0},paragraph1:{color:"#333333",fontSize:"14px",letterSpacing:0},note:{color:"#333333",fontSize:".75rem",fontWeight:"bold",letterSpacing:0,marginBottom:"1rem"},submitButton:{color:"#fff",backgroundColor:e.palette.success.main,"&:hover":{backgroundColor:e.palette.success.dark}}}})),kr=function(e){var t=e.open,a=e.calendarRanges,i=e.onClose,s=e.onSubmit,o=(Object(Wa.a)(e,["open","calendarRanges","onClose","onSubmit"]),vr()),c=o.modalBox,l=o.closeButton,u=o.header1,d=o.mainHeader,f=o.paragraph1,m=o.note,b=o.submitButton,p=Object(n.useState)([]),g=Object(ae.a)(p,2),y=g[0],h=g[1];Object(n.useEffect)((function(){var e=[];2===a.length&&a[0]&&a[1]&&(a[0].map((function(t,n){var r=new Date(1e3*t).toISOString(),i=new Date(1e3*a[1][n]).toISOString(),s="event-".concat(r,"-").concat(i);e=[].concat(Object(Ge.a)(e),[{id:s,title:"Working hours",start:r,end:i}])})),h(e))}),[a]);var v=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n="event-".concat(e,"-").concat(t);h((function(r){if(a&&r.find((function(e){return e.id===a}))){var i=r.findIndex((function(e){return e.id===a}));r.splice(i,1)}return[].concat(Object(Ge.a)(r),[{id:n,start:e,end:t,title:"Working hours"}])}))};return r.a.createElement(br.a,{open:t,onClose:i,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description"},r.a.createElement(Ot.a,{className:c},r.a.createElement(jt.a,{container:!0},r.a.createElement(jt.a,{item:!0,sm:11},r.a.createElement(Ut.a,{variant:"h4",className:u},"Calendar to indicate your availability to accept task"),r.a.createElement(Ut.a,{variant:"h2",className:d},"Please, select the time when you are available to accept tasks"),r.a.createElement(Ut.a,{variant:"body1",className:f},"This doesn't mean you have to work on the tasks during this time, it is primarily used by the distribution system to assign you with tasks."),r.a.createElement(Ut.a,{variant:"body2",className:m},"Remember you cannot select more than XX hours a day and past time ranges will be ignored")),r.a.createElement(jt.a,{item:!0,sm:1},r.a.createElement(jt.a,{container:!0,justify:"flex-end"},r.a.createElement(Gt.a,{"aria-label":"close",className:l,onClick:function(){i()}},r.a.createElement(Qt.a,null)))),r.a.createElement(jt.a,{item:!0,sm:12},r.a.createElement(pr.a,{events:y,plugins:[gr.b,yr.a,hr.a],initialView:"timeGridWeek",headerToolbar:{start:"prev",end:"today next"},startAccessor:"start",endAccessor:"end",select:function(e){v(new Date(e.startStr).toISOString(),new Date(e.endStr).toISOString()),e.view.calendar.unselect()},eventDrop:function(e){v(new Date(e.event._instance.range.start.getTime()+6e4*e.event._instance.range.start.getTimezoneOffset()).toISOString(),new Date(e.event._instance.range.end.getTime()+6e4*e.event._instance.range.end.getTimezoneOffset()).toISOString(),e.oldEvent._def.publicId),e.view.calendar.unselect()},eventColor:"#b6daa7",eventBorderColor:"#87d666",aspectRatio:2,selectable:!0,editable:!0,selectMirror:!0,businessHours:{startTime:"8:00",endTime:"20:00",daysOfWeek:[1,2,3,4,5]},nowIndicator:!0,allDaySlot:!1,scrollTime:"08:00:00"})),r.a.createElement(jt.a,{item:!0,sm:12},r.a.createElement(jt.a,{container:!0,justify:"center"},r.a.createElement(Vt.a,{variant:"contained",className:b,onClick:function(){i();var e=y.map((function(e){return[new Date(e.start).getTime()/1e3,new Date(e.end).getTime()/1e3]}));e.sort((function(e,t){return e[0]-t[0]}));var t=[],a=[];e.map((function(e){t.push(e[0]),a.push(e[1])})),s(t,a)}},"Submit week availability"))))))},Er=ze.AcceptTask,Tr=ze.RejectTask,jr=ze.SetUserCalendarRanges,Or=Object(wt.a)((function(e){return{root:{flexGrow:1},taskSection:{},toastMessage:{display:"flex",justifyContent:"center",alignItems:"center"},iconLoadingState:{color:"white",marginRight:e.spacing(1)},disabledModal:{opacity:.4},rejectButton:{color:e.palette.error.main,textDecoration:"underline"}}})),Sr={title:"Accept Assignment",message:"You need to create and confirm a transaction in order to accept this assignment."},Ar={title:"Reject Assignment",message:"You need to create and confirm a transaction in order to reject this assignment."},wr={title:"Set availability schedule",message:"You need to create and confirm a transaction in order to set your schedule."},Ir=function(e){return r.a.createElement(Tt.a,Object.assign({},e,{direction:"up"}))},Cr=function(e){return r.a.createElement(Tt.a,Object.assign({},e,{direction:"left"}))},_r=function(){var e=Object(It.a)(),t=Or(),a=t.root,i=t.taskSection,s=t.toastMessage,o=t.iconLoadingState,c=t.disabledModal,l=t.rejectButton,u=Object(f.c)().account,d=Object(De.h)().pathname,m=Ne(),b=m.modelName,p=m.setModel,g=$e(d,"userId"),y=$e(d,"model"),h=Qn(g),v=h.user,k=h.tasks,E=h.acceptedTask,T=h.videosRegistry,j=h.loading,O=Object(n.useRef)(!1),S=Object(n.useState)(!1),A=Object(ae.a)(S,2),w=A[0],I=A[1],C=Object(n.useState)(null),_=Object(ae.a)(C,2),x=_[0],R=_[1],N=Object(n.useState)(!1),M=Object(ae.a)(N,2),D=M[0],U=M[1],B=Object(n.useState)(!1),F=Object(ae.a)(B,2),L=F[0],z=F[1],P=Object(n.useState)(!0),H=Object(ae.a)(P,2),W=H[0],q=H[1],K=Object(n.useState)(!1),V=Object(ae.a)(K,2),$=V[0],Z=V[1],G=Object(n.useState)({}),Y=Object(ae.a)(G,2),X=Y[0],Q=Y[1],J=Object(n.useState)(!1),ee=Object(ae.a)(J,2),te=ee[0],ne=ee[1],re=Object(n.useState)(0),ie=Object(ae.a)(re,2),se=ie[0],oe=ie[1],ce=Object(n.useState)(!1),le=Object(ae.a)(ce,2),ue=le[0],de=le[1],fe=_e.find((function(e){return e.name==b}));Object(n.useEffect)((function(){p(y)}),[]),Object(n.useEffect)((function(){}),[se]),Object(n.useEffect)((function(){if(k){var e=k.length;k.map((function(t){1e3*t.contractData.endDate<Date.now()&&e--})),oe(e)}}),[k]),Object(n.useEffect)((function(){if(!O.current&&!j){setTimeout((function(){return q(!1)}),700);O.current=!0}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;clearTimeout(e)}}),[j]);var me=mr((function(e,t){"success"!==e&&"error"!==e||ne(!1);var a={type:e},n=Ke(e);Ve(t);a.message=r.a.createElement("span",null,n),z(!1),U(!1),Q(a),Z(!0),t===me.AcceptTask&&oe(0)})),be=function(e,t){var a=He(t);ne(!0),me[a](g,e.contractData.id),z(!0)},pe=[{label:"Accept",color:e.palette.success.main,variant:"contained",actionHandler:function(e){if(u){var t=Object(Ue.a)({},Sr);t.createTransactionHandler=function(){return be(e,Er)},R(t),U(!0)}else I(!0)}}];b!=_e[1].name&&b!=_e[2].name||pe.unshift({label:"Reject",color:e.palette.error.main,variant:"text",actionHandler:function(e){if(u){var t=Object(Ue.a)({},Ar);t.createTransactionHandler=function(){return be(e,Tr)},R(t),U(!0)}else I(!0)},className:l});var ge=pe.map((function(e){return Object(Ue.a)(Object(Ue.a)({},e),{},{disabled:!0})})),ye=[{label:"Translate",color:e.palette.translateButton,variant:"contained",actionHandler:function(e){bt.teams.updateSubtitleRequest(v.teams[0].name,e.job_id,g).then((function(){window.open(Be(e),"_blank")}),(function(e){return console.error("A problem has ocurred trying to update assignment using Amara API",e)}))}}];return v?Object.keys(v).length?r.a.createElement(La,{className:a},r.a.createElement(jt.a,{container:!0,direction:"column",justify:"space-evenly",alignItems:"center"},r.a.createElement(Pa,{title:fe.displayName,description:fe.description,img:Pn.a,cta:r.a.createElement(Vt.a,{onClick:function(){return de(!0)}},"View availability calendar")}),E?r.a.createElement(jt.a,{container:!0,className:i},r.a.createElement(jt.a,{item:!0},r.a.createElement(Ot.a,{mt:k?2:0,width:"100"},r.a.createElement(Dn,{tasks:[E],videoRegistry:T===[]?null:T,title:"You have this task selected",description:"",emptyText:"No tasks available",taskActionButtons:ye})))):!j&&r.a.createElement(jt.a,{container:!0,className:i},r.a.createElement(jt.a,{item:!0},r.a.createElement(Ot.a,{mt:k?2:0,width:"100"},r.a.createElement(Dn,{model:b,tasks:0==k.length?[]:k,videoRegistry:T===[]?null:T,title:te?"Processing your request...":se<=0?"No tasks available":1===se?"This task is currently assigned to you":"These tasks are currently assigned to you",description:"",taskActionButtons:te?ge:pe,onTaskTimeout:function(){console.log("    Substract one to number of task from onTaskTimeout"),oe((function(e){return e-1}))}}))))),r.a.createElement(kr,{open:ue,calendarRanges:v?[v.calendarRangesStart,v.calendarRangesEnd]:null,onSubmit:function(e,t){if(u){var a=Object(Ue.a)({},wr);a.createTransactionHandler=function(){var a=He(jr);ne(!0),me[a](g,e,t),z(!0)},R(a),U(!0)}else I(!0)},onClose:function(){de(!1)}}),r.a.createElement(St.a,{open:$,anchorOrigin:{vertical:"bottom",horizontal:"right"},TransitionComponent:Cr,transitionDuration:500,autoHideDuration:3e3,onClose:function(e,t){"clickaway"!==t&&Z(!1)},key:"bottomright"},r.a.createElement(Ct.a,{severity:X.type||"info"},X.message)),r.a.createElement(St.a,{open:W,TransitionComponent:Ir,transitionDuration:500,onClose:function(){return setTimeout((function(){}),1e3)}},r.a.createElement(Ct.a,{icon:!1,variant:"filled",color:"info"},r.a.createElement("div",{className:s},j?r.a.createElement(At.a,{className:o,size:20,thickness:5}):r.a.createElement(xt.a,{className:o}),"Loading your assingments!"))),r.a.createElement(Fn,{className:c,modalContent:x,open:D,activating:L,onClose:function(){return U(!1)},onCreateTransaction:function(){return be()}}),r.a.createElement(ka,{type:"error",title:"You can't perform this action",message:"Check you have Metamask installed and you're connected to your account.",open:w,onClose:function(){return I(!1)}})):r.a.createElement(Ln,null):null},xr=a(1010),Rr=a(1011),Nr=a(1012),Mr=a(1002),Dr=a(944),Ur=a(1013),Br=a(1014),Fr=a(204),Lr=a.n(Fr),zr=a(206),Pr=a.n(zr),Hr=a(205),Wr=a.n(Hr),qr=a(207),Kr=a.n(qr),Vr=a(1001),$r=a(1030),Zr=a(1018),Gr=a(1003);var Yr=function(e){Object(It.a)();var t=e.name,a=e.label,n=(e.labelTitle,e.value),i=e.onChange,s=e.options,o=e.className,c=(e.required,Object(Wa.a)(e,["name","label","labelTitle","value","onChange","options","className","required"]));return r.a.createElement(Vr.a,Object.assign({variant:"outlined",className:o},c),r.a.createElement($r.a,null,a),r.a.createElement(Zr.a,{name:t,label:a,value:n,onChange:i},r.a.createElement(Gr.a,{value:""},"None"),s.map((function(e,t){return r.a.createElement(Gr.a,{key:t,value:e.value},e.label)}))))},Xr=a(8),Qr=a(1007),Jr=a(1009),ei=a(1004),ti=a(1006),ai=a(1008),ni=a(1005),ri=Object(wt.a)({table:{minWidth:650}}),ii=Object(Xr.a)((function(e){return{head:{backgroundColor:e.palette.secondary.dark,color:e.palette.common.white},body:{fontSize:14}}}))(ei.a),si=Object(Xr.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}}))(ni.a),oi=function(e){var t=e.tasks;ri();return t?r.a.createElement(ti.a,{component:_a.a},r.a.createElement(Qr.a,{stickyHeader:!0,"aria-label":"Tasks Table"},r.a.createElement(ai.a,null,r.a.createElement(ni.a,null,r.a.createElement(ii,{align:"center"},"Task Id"),r.a.createElement(ii,{align:"center"},"Status"),r.a.createElement(ii,{align:"center"},"Assigned to"))),r.a.createElement(Jr.a,null,null==t?r.a.createElement(si,null,r.a.createElement(ii,{componenet:"th",scope:"row",colSpan:"4",align:"left"},"Loading data...")):t.length?t.map((function(e){return r.a.createElement(si,{key:e.id},r.a.createElement(ii,{component:"th",scope:"row",align:"center"},e.id),r.a.createElement(ii,{align:"center"},e.status),r.a.createElement(ii,{align:"center"},e.userId?e.userId:"--"))})):r.a.createElement(si,null,r.a.createElement(ii,{componenet:"th",scope:"row",colSpan:"4",align:"center"},"No tasks"))))):r.a.createElement(r.a.Fragment,null)},ci=Object(wt.a)({table:{minWidth:650},lastUpdateCell:{color:"#676767",backgroundColor:"#fff"}}),li=Object(Xr.a)((function(e){return{head:{backgroundColor:e.palette.secondary.dark,color:e.palette.common.white},body:{fontSize:14}}}))(ei.a),ui=Object(Xr.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}}))(ni.a),di=function(e){var t=e.users,a=ci();return r.a.createElement(ti.a,{component:_a.a},r.a.createElement(Qr.a,{stickyHeader:!0,"aria-label":"Transactions Table"},r.a.createElement(ai.a,null,r.a.createElement(ni.a,null,r.a.createElement(li,{align:"center"},"Id"),r.a.createElement(li,{align:"center"},"Accepted task"),r.a.createElement(li,{align:"center"},"Task id"))),r.a.createElement(Jr.a,null,null==t?r.a.createElement(ui,null,r.a.createElement(li,{componenet:"th",scope:"row",colSpan:"4",align:"left"},"Loading data...")):t.length?t.map((function(e){return r.a.createElement(ui,{key:e.id},r.a.createElement(li,{align:"center",component:"th",scope:"row"},e.id),r.a.createElement(li,{align:"center"},e.hasTask?"\u2714\ufe0f":"\u274c"),r.a.createElement(li,{align:"center"},e.taskId||"--"))})):r.a.createElement(ui,null,r.a.createElement(li,{componenet:"th",scope:"row",colSpan:"4",align:"center"},"No users")),r.a.createElement(ui,{key:"last-update-trow"},r.a.createElement(li,{className:a.lastUpdateCell},"Last update ".concat(new Date(Date.now()).toLocaleTimeString()))))))},fi=Object(Xr.a)((function(e){return{head:{backgroundColor:e.palette.secondary.dark,color:e.palette.common.white},body:{fontSize:14}}}))(ei.a),mi=Object(Xr.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}}))(ni.a),bi=function(e){var t=e.txs;return t?r.a.createElement(ti.a,{component:_a.a},r.a.createElement(Qr.a,{stickyHeader:!0,"aria-label":"Transactions Table"},r.a.createElement(ai.a,null,r.a.createElement(ni.a,null,r.a.createElement(fi,{align:"center"},"Block number"),r.a.createElement(fi,{align:"center"},"To"),r.a.createElement(fi,{align:"center"},"From"))),r.a.createElement(Jr.a,null,null==t?r.a.createElement(mi,null,r.a.createElement(fi,{componenet:"th",scope:"row",colSpan:"4",align:"left"},"Loading data...")):t.length?t.map((function(e){return r.a.createElement(mi,{key:e.transactionHash},r.a.createElement(fi,{component:"th",scope:"row",align:"center"},e.blockNumber),r.a.createElement(fi,{align:"center"},e.to),r.a.createElement(fi,{align:"center"},e.from))})):r.a.createElement(mi,null,r.a.createElement(fi,{componenet:"th",scope:"row",colSpan:"4",align:"center"},"No transactions"))))):r.a.createElement(r.a.Fragment,null)},pi=["p2pmodels.user1","p2pmodels.user2","p2pmodels.user3","p2pmodels.user4","p2pmodels.user5","p2pmodels.user6"],gi=([{id:"MsVoQB3DTAdZ",video_type:"K",primary_audio_language_code:"en",title:"Keyboard - 10822",description:"",duration:12,thumbnail:"https://userdata.staging.amara.org/video/thumbnail/bf119bf3f4d730b5c53256f6894e45e78d1cb56d_480x270_crop-smart_upscale-True_q85.jpg",created:"2018-04-16T15:19:24Z",team:"collab-demo-team",project:null,all_urls:["http://cdnapi.kaltura.com/p/1492321/sp/149232100/playManifest/entryId/0_hvfq3mvs/format/url/protocol/http"],metadata:{},languages:[{code:"de",name:"German",published:!1,dir:"ltr",subtitles_uri:"https://staging.amara.org/api/videos/MsVoQB3DTAdZ/languages/de/subtitles/",resource_uri:"https://staging.amara.org/api/videos/MsVoQB3DTAdZ/languages/de/"},{code:"en",name:"English",published:!0,dir:"ltr",subtitles_uri:"https://staging.amara.org/api/videos/MsVoQB3DTAdZ/languages/en/subtitles/",resource_uri:"https://staging.amara.org/api/videos/MsVoQB3DTAdZ/languages/en/"},{code:"es",name:"Spanish",published:!1,dir:"ltr",subtitles_uri:"https://staging.amara.org/api/videos/MsVoQB3DTAdZ/languages/es/subtitles/",resource_uri:"https://staging.amara.org/api/videos/MsVoQB3DTAdZ/languages/es/"},{code:"fr",name:"French",published:!1,dir:"ltr",subtitles_uri:"https://staging.amara.org/api/videos/MsVoQB3DTAdZ/languages/fr/subtitles/",resource_uri:"https://staging.amara.org/api/videos/MsVoQB3DTAdZ/languages/fr/"},{code:"pt-br",name:"Portuguese, Brazilian",published:!1,dir:"ltr",subtitles_uri:"https://staging.amara.org/api/videos/MsVoQB3DTAdZ/languages/pt-br/subtitles/",resource_uri:"https://staging.amara.org/api/videos/MsVoQB3DTAdZ/languages/pt-br/"}],activity_uri:"https://staging.amara.org/api/videos/MsVoQB3DTAdZ/activity/",urls_uri:"https://staging.amara.org/api/videos/MsVoQB3DTAdZ/urls/",subtitle_languages_uri:"https://staging.amara.org/api/videos/MsVoQB3DTAdZ/languages/",resource_uri:"https://staging.amara.org/api/videos/MsVoQB3DTAdZ/"},{id:"mjgA8CA8ieBU",video_type:"K",primary_audio_language_code:"en",title:"Footage - 12127",description:"",duration:7,thumbnail:"https://userdata.staging.amara.org/video/thumbnail/3d303d684fabfb10cdf4a996e00e1745205a9e68_480x270_crop-smart_upscale-True_q85.jpg",created:"2018-04-16T15:19:24Z",team:"collab-demo-team",project:null,all_urls:["http://cdnapi.kaltura.com/p/1492321/sp/149232100/playManifest/entryId/0_0xivs8to/format/url/protocol/http"],metadata:{},languages:[{code:"de",name:"German",published:!1,dir:"ltr",subtitles_uri:"https://staging.amara.org/api/videos/mjgA8CA8ieBU/languages/de/subtitles/",resource_uri:"https://staging.amara.org/api/videos/mjgA8CA8ieBU/languages/de/"},{code:"en",name:"English",published:!0,dir:"ltr",subtitles_uri:"https://staging.amara.org/api/videos/mjgA8CA8ieBU/languages/en/subtitles/",resource_uri:"https://staging.amara.org/api/videos/mjgA8CA8ieBU/languages/en/"},{code:"es",name:"Spanish",published:!1,dir:"ltr",subtitles_uri:"https://staging.amara.org/api/videos/mjgA8CA8ieBU/languages/es/subtitles/",resource_uri:"https://staging.amara.org/api/videos/mjgA8CA8ieBU/languages/es/"},{code:"fr",name:"French",published:!1,dir:"ltr",subtitles_uri:"https://staging.amara.org/api/videos/mjgA8CA8ieBU/languages/fr/subtitles/",resource_uri:"https://staging.amara.org/api/videos/mjgA8CA8ieBU/languages/fr/"},{code:"pt-br",name:"Portuguese, Brazilian",published:!1,dir:"ltr",subtitles_uri:"https://staging.amara.org/api/videos/mjgA8CA8ieBU/languages/pt-br/subtitles/",resource_uri:"https://staging.amara.org/api/videos/mjgA8CA8ieBU/languages/pt-br/"}],activity_uri:"https://staging.amara.org/api/videos/mjgA8CA8ieBU/activity/",urls_uri:"https://staging.amara.org/api/videos/mjgA8CA8ieBU/urls/",subtitle_languages_uri:"https://staging.amara.org/api/videos/mjgA8CA8ieBU/languages/",resource_uri:"https://staging.amara.org/api/videos/mjgA8CA8ieBU/"}].reduce((function(e,t){return e.set(t.id,t),e}),new Map),[{job_id:"JS4TMAF",video:"MsVoQB3DTAdZ",language:"de",source_team:"collab-demo-team",team:"collab-demo-team",evaluation_teams:[],status:"in-progress",work_status:"needs-subtitler",subtitler:null,reviewer:null,approver:null,created:"2018-10-29T22:40:28Z",subtitles_due_date:null,review_due_date:null,approval_due_date:null,due_date:null,completed:null,work_completed:null,video_uri:"https://staging.amara.org/api/videos/MsVoQB3DTAdZ/",subtitles_uri:"https://staging.amara.org/api/videos/MsVoQB3DTAdZ/languages/de/subtitles/",actions_uri:"https://staging.amara.org/api/videos/MsVoQB3DTAdZ/languages/de/subtitles/actions/",resource_uri:"https://staging.amara.org/api/teams/collab-demo-team/subtitle-requests/JS4TMAF/"},{job_id:"0UTJG1S",video:"MsVoQB3DTAdZ",language:"fr",source_team:"collab-demo-team",team:"collab-demo-team",evaluation_teams:[],status:"in-progress",work_status:"needs-subtitler",subtitler:null,reviewer:null,approver:null,created:"2018-10-29T22:40:28Z",subtitles_due_date:null,review_due_date:null,approval_due_date:null,due_date:null,completed:null,work_completed:null,video_uri:"https://staging.amara.org/api/videos/MsVoQB3DTAdZ/",subtitles_uri:"https://staging.amara.org/api/videos/MsVoQB3DTAdZ/languages/fr/subtitles/",actions_uri:"https://staging.amara.org/api/videos/MsVoQB3DTAdZ/languages/fr/subtitles/actions/",resource_uri:"https://staging.amara.org/api/teams/collab-demo-team/subtitle-requests/0UTJG1S/"},{job_id:"9AR30EW",video:"mjgA8CA8ieBU",language:"es",source_team:"collab-demo-team",team:"collab-demo-team",evaluation_teams:[],status:"in-progress",work_status:"needs-subtitler",subtitler:null,reviewer:null,approver:null,created:"2018-10-29T22:40:28Z",subtitles_due_date:null,review_due_date:null,approval_due_date:null,due_date:null,completed:null,work_completed:null,video_uri:"https://staging.amara.org/api/videos/mjgA8CA8ieBU/",subtitles_uri:"https://staging.amara.org/api/videos/mjgA8CA8ieBU/languages/es/subtitles/",actions_uri:"https://staging.amara.org/api/videos/mjgA8CA8ieBU/languages/es/subtitles/actions/",resource_uri:"https://staging.amara.org/api/teams/collab-demo-team/subtitle-requests/9AR30EW/"},{job_id:"TNEYKA0",video:"mjgA8CA8ieBU",language:"de",source_team:"collab-demo-team",team:"collab-demo-team",evaluation_teams:[],status:"in-progress",work_status:"needs-subtitler",subtitler:null,reviewer:null,approver:null,created:"2018-10-29T22:40:28Z",subtitles_due_date:null,review_due_date:null,approval_due_date:null,due_date:null,completed:null,work_completed:null,video_uri:"https://staging.amara.org/api/videos/mjgA8CA8ieBU/",subtitles_uri:"https://staging.amara.org/api/videos/mjgA8CA8ieBU/languages/de/subtitles/",actions_uri:"https://staging.amara.org/api/videos/mjgA8CA8ieBU/languages/de/subtitles/actions/",resource_uri:"https://staging.amara.org/api/teams/collab-demo-team/subtitle-requests/TNEYKA0/"}]);function yi(){var e=Object(n.useState)([]),t=Object(ae.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)([]),s=Object(ae.a)(i,2),o=s[0],c=s[1],l=Object(n.useState)(),u=Object(ae.a)(l,2),d=u[0],f=u[1],m=Object(n.useState)([]),b=Object(ae.a)(m,2),p=b[0],g=b[1],y=Object(n.useState)(),h=Object(ae.a)(y,2),v=h[0],k=h[1],E=Object(n.useState)(),T=Object(ae.a)(E,2),j=T[0],O=T[1],S=Object(n.useState)(),A=Object(ae.a)(S,2),w=A[0],I=A[1],C=Object(n.useState)(),_=Object(ae.a)(C,2),x=_[0],R=_[1],N=Object(n.useState)(!1),M=Object(ae.a)(N,2),D=M[0],U=M[1],B=Object(n.useState)(),F=Object(ae.a)(B,2),L=F[0],z=F[1],P=vt(),H=Object(ae.a)(P,2),W=H[0],q=H[1],K=q.data,V=K.txHash,$=K.receipt,Z=q.loading,G=q.error;return Object(n.useEffect)((function(){return G?(console.log("[useBulkTransaction] Error: "),console.log(G),void g((function(e){return[].concat(Object(Ge.a)(e),[G])}))):Z&&V?(r((function(e){return[].concat(Object(Ge.a)(e),[V])})),void U(!1)):!$||Z||D?void 0:(c((function(e){return[].concat(Object(Ge.a)(e),[$])})),g((function(e){return[].concat(Object(Ge.a)(e),[null])})),U(!0),void(x+1<L?(W(v,w[x+1],j),R((function(e){return e+1}))):x+1==L&&f(!1)))}),[V,$,Z,G]),[function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];k(e),O(a),f(!0),R(0),z(t.length),I(t),W(e,t[0],a)},{data:{txsHash:a,receipts:o},loading:d,error:p}]}var hi,vi,ki=function(){var e="0x75567c2Cfbc85344b053BB97cA3e757A53331683",t=Object(f.c)().library,a=Ne(),r=a.contractAddress,i=a.contractABI,s=yi(),o=Object(ae.a)(s,2),c=o[0],l=o[1],u=l.data,d=l.loading,m=l.error,b=Object(n.useCallback)((function(e,t){if(e)return new e.eth.Contract(t)}),[]);return[Object(n.useCallback)((function(){var a=b(t,i),n={from:e,to:r,data:a.methods.restart().encodeABI(),gas:45e4,gasPrice:2e9},s=pi.map((function(t){return{from:e,to:r,data:a.methods.registerUser(Xe(t)).encodeABI(),gas:45e4,gasPrice:2e9}})),o=gi.map((function(t){return{from:e,to:r,data:a.methods.createTask(Xe(t.job_id)).encodeABI(),gas:45e4,gasPrice:2e9}}));c(t,[n].concat(Object(Ge.a)(s),Object(Ge.a)(o)),!0)}),[t]),{data:u,loading:d,error:m}]},Ei=Object(wt.a)((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,margin:e.spacing(5.5,0),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),margin:e.spacing(5.5,0)},drawerClose:{transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(3.5),margin:e.spacing(5.5,0),"& div.MuiListItemIcon-root":{marginRight:e.spacing(0)}},toolbar:Object(Ue.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),listItem:{"& > div.MuiListItemIcon-root":{marginRight:e.spacing(1),minWidth:e.spacing(1.5)}},content:{flexGrow:1,padding:e.spacing(3)}}})),Ti=function(e){return r.a.createElement(Tt.a,Object.assign({},e,{direction:"left"}))},ji=function(){var e,t,a=Ei(),i=Object(It.a)(),s=Ne(),o=s.modelName,c=s.modelDisplayName,l=s.setModel,u=(s.modelContractInstance,nt().tasks),d=tt(),f=d.users,m=d.refetch,b=ki(),p=Object(ae.a)(b,2),g=p[0],y=p[1],h=y.data,v=(y.loading,y.error,Object(n.useState)(!1)),k=Object(ae.a)(v,2),E=k[0],T=k[1],j=Object(n.useState)(!1),O=Object(ae.a)(j,2),S=O[0],A=O[1],w=Object(n.useState)(""),I=Object(ae.a)(w,2),C=I[0],_=I[1],x=_e.map((function(e){return{value:e.name,label:e.displayName}}));Object(n.useEffect)((function(){m()}),[h]);return r.a.createElement(La,{className:a.root},r.a.createElement(Nt.a,{position:"fixed",className:Object(Sa.a)(a.appBar,Object(Le.a)({},a.appBarShift,E))},r.a.createElement(xr.a,null,r.a.createElement(Gt.a,{color:"inherit","aria-label":"open drawer",onClick:function(){T(!0)},edge:"start",className:Object(Sa.a)(a.menuButton,Object(Le.a)({},a.hide,E))},r.a.createElement(Lr.a,null)),r.a.createElement(Ut.a,{variant:"h6",noWrap:!0},"Administration Panel"))),r.a.createElement(Rr.a,{variant:"permanent",className:Object(Sa.a)(a.drawer,(e={},Object(Le.a)(e,a.drawerOpen,E),Object(Le.a)(e,a.drawerClose,!E),e)),classes:{paper:Object(Sa.a)((t={},Object(Le.a)(t,a.drawerOpen,E),Object(Le.a)(t,a.drawerClose,!E),t))}},r.a.createElement("div",{className:a.toolbar},r.a.createElement(Gt.a,{onClick:function(){T(!1)}},"rtl"===i.direction?r.a.createElement(Wr.a,null):r.a.createElement(Pr.a,null))),r.a.createElement(Nr.a,null),r.a.createElement(Mr.a,null,r.a.createElement(Dr.a,{className:a.listItem,button:!0,key:"RestartPrototype"},r.a.createElement(Ur.a,{onClick:function(){_("Restarting prototype... Don't close the tab."),A(!0),g()}},r.a.createElement(Kr.a,null)),r.a.createElement(Br.a,{primary:"Restart prototype"})))),r.a.createElement("main",{className:a.content},r.a.createElement("div",{className:a.toolbar}),r.a.createElement(jt.a,{container:!0,spacing:2},r.a.createElement(jt.a,{item:!0,lg:6},r.a.createElement(Ut.a,{variant:"h3"},c)),r.a.createElement(jt.a,{item:!0,lg:6},r.a.createElement(jt.a,{container:!0,justify:"flex-end",alignItems:"center",spacing:2},r.a.createElement(jt.a,{item:!0},r.a.createElement(Ut.a,{variant:"h6"},"Change model:")),r.a.createElement(jt.a,{item:!0},r.a.createElement(Yr,{name:"model",label:"model",value:o,options:x,onChange:function(e){return l(e.target.value)}})))),r.a.createElement(jt.a,{item:!0,lg:6},r.a.createElement(Ut.a,{variant:"h6"},"Registered users"),r.a.createElement(di,{users:f&&u?f.map((function(e){var t=u.filter((function(t){return t.userId===e.id}))[0];return{id:e.id,hasTask:e.hasTask,taskId:t?t.id:null}})):null})),r.a.createElement(jt.a,{item:!0,lg:6},r.a.createElement(Ut.a,{variant:"h6"},"Tasks"),r.a.createElement(oi,{tasks:u})),r.a.createElement(jt.a,{item:!0,lg:12},r.a.createElement(Ut.a,{variant:"h6"},"Transactions"),r.a.createElement(bi,{txs:h.receipts})))),r.a.createElement(St.a,{open:S,anchorOrigin:{vertical:"bottom",horizontal:"right"},TransitionComponent:Ti,transitionDuration:500,autoHideDuration:3e3,onClose:function(e,t){"clickaway"!==t&&A(!1)},key:"bottomright"},r.a.createElement(Ct.a,{severity:"info"},C)))},Oi=a(447),Si=a.n(Oi),Ai=a(448),wi=a.n(Ai),Ii=a(449),Ci=a.n(Ii),_i=Object(wt.a)((function(e){return{table:{minWidth:650},timer:{color:e.palette.primary.main}}})),xi=Object(Xr.a)((function(e){return{head:{backgroundColor:e.palette.secondary.dark,color:e.palette.common.white},body:{fontSize:14}}}))(ei.a),Ri=Object(Xr.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}}))(ni.a),Ni=function(e){var t=e.jobs,a=_i();return t?r.a.createElement(ti.a,{component:_a.a},r.a.createElement(Qr.a,{stickyHeader:!0,"aria-label":"Jobs Table"},r.a.createElement(ai.a,null,r.a.createElement(ni.a,null,r.a.createElement(xi,{align:"center"},"Timer id"),r.a.createElement(xi,{align:"center"},"Task id"),r.a.createElement(xi,{align:"center"},"Status"),r.a.createElement(xi,{align:"center"},"Timeout"))),r.a.createElement(Jr.a,null,null==t?r.a.createElement(Ri,null,r.a.createElement(xi,{componenet:"th",scope:"row",colSpan:"4",align:"left"},"Loading data...")):t.length?t.map((function(e){return r.a.createElement(Ri,{key:e.id},r.a.createElement(xi,{align:"center"},e.id),r.a.createElement(xi,{align:"center"},e.taskId),r.a.createElement(xi,{align:"center"},e.status),r.a.createElement(xi,{align:"center"},r.a.createElement(Sn,{end:new Date(e.endDate),className:a.timer})))})):r.a.createElement(Ri,null,r.a.createElement(xi,{componenet:"th",scope:"row",colSpan:"4",align:"center"},"No jobs"))))):r.a.createElement(r.a.Fragment,null)},Mi=Object(wt.a)({table:{minWidth:650},lastUpdateCell:{color:"#676767",backgroundColor:"#fff"}}),Di=Object(Xr.a)((function(e){return{head:{backgroundColor:e.palette.secondary.dark,color:e.palette.common.white},body:{fontSize:14}}}))(ei.a),Ui=Object(Xr.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}}))(ni.a),Bi=function(e){var t=e.tasks,a=Mi();return t?r.a.createElement(ti.a,{component:_a.a},r.a.createElement(Qr.a,{stickyHeader:!0,"aria-label":"Tasks Table"},r.a.createElement(ai.a,null,r.a.createElement(ni.a,null,r.a.createElement(Di,{align:"center"},"Task Id"),r.a.createElement(Di,{align:"center"},"Status"),r.a.createElement(Di,{align:"center"},"End date"),r.a.createElement(Di,{align:"center"},"Assigned to"))),r.a.createElement(Jr.a,null,null==t?r.a.createElement(Ui,null,r.a.createElement(Di,{componenet:"th",scope:"row",colSpan:"4",align:"left"},"Loading data...")):t.length?t.map((function(e){return r.a.createElement(Ui,{key:e.id},r.a.createElement(Di,{component:"th",scope:"row",align:"center"},e.id),r.a.createElement(Di,{align:"center"},e.status),r.a.createElement(Di,{align:"center"},e.endDate?new Date(e.endDate).toLocaleTimeString():"--"),r.a.createElement(Di,{align:"center"},e.userId?e.userId:"--"))})):r.a.createElement(Ui,null,r.a.createElement(Di,{componenet:"th",scope:"row",colSpan:"4",align:"center"},"No tasks")),r.a.createElement(Ui,{key:"last-update-trow"},r.a.createElement(Di,{className:a.lastUpdateCell},"Last update ".concat(new Date(Date.now()).toLocaleTimeString())))))):r.a.createElement(r.a.Fragment,null)},Fi={NonExistent:Symbol("NON_EXISTENT"),Available:Symbol("AVAILABLE"),Assigned:Symbol("ASSIGNED"),Accepted:Symbol("ACCEPTED"),Rejected:Symbol("REJECTED"),Completed:Symbol("COMPLETED")},Li=(hi={},Object(Le.a)(hi,Fi.NonExistent,"NonExistent"),Object(Le.a)(hi,Fi.Available,"Available"),Object(Le.a)(hi,Fi.Assigned,"Assigned"),Object(Le.a)(hi,Fi.Accepted,"Accepted"),Object(Le.a)(hi,Fi.Rejected,"Rejected"),Object(Le.a)(hi,Fi.Completed,"Completed"),hi);vi={},Object(Le.a)(vi,Fi.NonExistent,0),Object(Le.a)(vi,Fi.Available,1),Object(Le.a)(vi,Fi.Assigned,2),Object(Le.a)(vi,Fi.Accepted,3),Object(Le.a)(vi,Fi.Rejected,4),Object(Le.a)(vi,Fi.Completed,5);function zi(e){return Li[e]}var Pi=function(e,t,a,r,i){var s=Ne(),o=s.contractAddress,c=s.modelContractInstance,l=Object(n.useState)(!1),u=Object(ae.a)(l,2),d=u[0],f=u[1],m=function(){var e=Object(n.useState)([]),t=Object(ae.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)([]),s=Object(ae.a)(i,2),o=s[0],c=s[1],l=Object(n.useRef)(!1),u=Object(n.useState)([]),d=Object(ae.a)(u,2),f=d[0],m=d[1],b=Object(n.useState)([]),p=Object(ae.a)(b,2),g=p[0],y=p[1],h=Object(n.useState)([]),v=Object(ae.a)(h,2),k=v[0],E=v[1],T=Object(n.useState)([]),j=Object(ae.a)(T,2),O=j[0],S=j[1],A=Object(n.useRef)(null),w=Object(n.useState)(!1),I=Object(ae.a)(w,2),C=I[0],_=I[1],x=Object(n.useRef)(0),R=vt(),N=Object(ae.a)(R,2),M=N[0],D=N[1],U=D.data,B=U.txHash,F=U.receipt,L=D.loading,z=D.error;return Object(n.useEffect)((function(){return z?(console.log(z),void m((function(e){return[].concat(Object(Ge.a)(e),[z])}))):L&&B?(r((function(e){return[].concat(Object(Ge.a)(e),[B])})),void _(!1)):!F||L||C?void 0:(c((function(e){return[].concat(Object(Ge.a)(e),[F])})),m((function(e){return[].concat(Object(Ge.a)(e),[null])})),void(A.current<x.current?(_(!0),M(g[A.current],O[A.current],k[A.current]),A.current++):A.current==x.current&&(l.current=!1)))}),[B,F,L,z,O]),[function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];l.current||(null==A.current&&(A.current=0),l.current=!0,_(!0),M(e,t,a),A.current++),y((function(t){return[].concat(Object(Ge.a)(t),[e])})),S((function(e){return[].concat(Object(Ge.a)(e),[t])})),E((function(e){return[].concat(Object(Ge.a)(e),[a])})),x.current++},function(){r([]),c([]),l.current=!1,m([]),A.current=null,x.current=0,y([]),S([]),E([]),_(!1)},{data:{txsHash:a,receipts:o},loading:l.current,error:f}]}(),b=Object(ae.a)(m,3),p=b[0],g=b[1],y=b[2],h=Object(n.useRef)(new Map),v=Object(n.useRef)(new Map);function k(e,t,a,n){return{taskId:a,timerId:setTimeout(Object(q.a)(W.a.mark((function a(){return W.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:p(e,t,!0);case 1:case"end":return a.stop()}}),a)}))),n),endDate:Date.now()+n,tx:{data:{hash:null,receipt:null},loading:!1,error:null}}}var E=function(){var n=Object(q.a)(W.a.mark((function n(s,l){var u,d,f,m,b;return W.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!s||!l){n.next=13;break}return n.next=3,c.methods.getTask(Xe(s)).call();case 3:u=n.sent,d=u.endDate,f=1e3*d,i("".concat("TaskAllocated"," event - Task ").concat(s," has been assigned to ").concat(l," and will be reassigned on ").concat(new Date(f).toLocaleTimeString(),", current time is: ").concat(new Date(Date.now()).toLocaleTimeString()),"info"),h.current.has(s)&&h.current.delete(s),b={from:t,to:o,data:c.methods.reallocateTask(Xe(s)).encodeABI(),gas:a,gasPrice:r},m=k(e,b,s,f-Date.now()),h.current.set(m.taskId,m),n.next=13;break;case 13:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();function T(e,t){t&&e&&(i("".concat("TaskAccepted"," event - Task ").concat(t," accepted by user ").concat(e),"info"),h.current.has(t)&&(clearTimeout(h.current.get(t).timerId),h.current.delete(t)))}function j(n,i){if(i&&n){h.current.has(i)&&(clearTimeout(h.current.get(i).timerId),h.current.delete(i));var s={from:t,to:o,data:c.methods.reallocateTask(Xe(i)).encodeABI(),gas:a,gasPrice:r};p(e,s,!0)}}function O(e){var t=e.taskId;t&&h.current.has(t)&&h.current.delete(t)}function S(){return A.apply(this,arguments)}function A(){return(A=Object(q.a)(W.a.mark((function e(){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.events.UserRegistered({},(function(e,t){v.current.get(t.id)||(v.current.set(t.id,!0),Object(Ye.hexToUtf8)(t.returnValues.userId))})),c.events.UserDeleted({},(function(e,t){v.current.get(t.id)||(v.current.set(t.id,!0),Object(Ye.hexToUtf8)(t.returnValues.userId))})),c.events.TaskCreated({},(function(e,t){v.current.get(t.id)||(v.current.set(t.id,!0),Object(Ye.hexToUtf8)(t.returnValues.taskId))})),c.events.TaskAllocated({},function(){var e=Object(q.a)(W.a.mark((function e(t,a){var n,r,i;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v.current.get(a.id)){e.next=5;break}return v.current.set(a.id,!0),n=a.returnValues,r=n.taskId,i=n.userId,e.next=5,E(Object(Ye.hexToUtf8)(r),Object(Ye.hexToUtf8)(i));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),c.events.TaskAccepted({},(function(e,t){v.current.get(t.id)||(v.current.set(t.id,!0),T(Object(Ye.hexToUtf8)(t.returnValues.userId),Object(Ye.hexToUtf8)(t.returnValues.taskId)))})),c.events.TaskRejected({},(function(e,t){v.current.get(t.id)||(v.current.set(t.id,!0),j(Object(Ye.hexToUtf8)(t.returnValues.userId),Object(Ye.hexToUtf8)(t.returnValues.taskId)))})),c.events.TaskDeleted({},(function(e,t){v.current.get(t.id)||(v.current.set(t.id,!0),O(Object(Ye.hexToUtf8)(t.returnValues.taskId)))})),c.events.RejecterDeleted({},(function(e,t){v.current.get(t.id)||(v.current.set(t.id,!0),Object(Ye.hexToUtf8)(t.returnValues.userId),Object(Ye.hexToUtf8)(t.returnValues.taskId))}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return I.apply(this,arguments)}function I(){return(I=Object(q.a)(W.a.mark((function n(i){var s;return W.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:(s=i.filter((function(e){return e.status===zi(Fi.Assigned)||e.status===zi(Fi.Rejected)||e.status===zi(Fi.Available)}))).length&&s.forEach((function(n){var i=new Date,s=new Date(1e3*n.endDate),l={from:t,to:o,data:c.methods.reallocateTask(Xe(n.id)).encodeABI(),gas:a,gasPrice:r};if(s>i){var u=k(e,l,n.id,s-i);h.current.set(u.taskId,u)}else p(e,l,!0)}));case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return{start:function(){var e=Object(q.a)(W.a.mark((function e(t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),S(),e.next=4,w(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),stop:function(){f(!1),Object(Ge.a)(h.current).forEach((function(e){var t=Object(ae.a)(e,2),a=(t[0],t[1]);console.log(a),clearTimeout(a.timerId)})),h.current=new Map,v.current=new Map,g(),e.eth.clearSubscriptions()},running:d,scheduledJobs:h.current,txsRecord:y}},Hi=function(e){var t="0x75567c2Cfbc85344b053BB97cA3e757A53331683",a=Object(f.c)().library,r=Ne(),i=r.contractAddress,s=r.modelContractInstance,o=r.modelName,c=yi(),l=Object(ae.a)(c,2),u=l[0],d=l[1],m=Pi(a,t,45e4,8e9,e),b=m.start,p=m.stop,g=m.running,y=m.scheduledJobs,h=m.txsRecord,v=Object(n.useCallback)((function(){var e={from:t,to:i,data:s.methods.restart().encodeABI(),gas:45e4,gasPrice:8e9},n=pi.map((function(e){return{from:t,to:i,data:s.methods.registerUser(Xe(e)).encodeABI(),gas:45e4,gasPrice:8e9}})),r=gi.map((function(e){return{from:t,to:i,data:s.methods.createTask(Xe(e.job_id),90).encodeABI(),gas:45e4,gasPrice:8e9}}));u(a,[e].concat(Object(Ge.a)(n),Object(Ge.a)(r)),!0)}),[a,s,o]);return{startManager:function(e){return b(e)},stopManager:function(){return p()},managerRunning:g,jobs:y,txsRecord:{data:{txsHash:[].concat(Object(Ge.a)(h.data.txsHash),Object(Ge.a)(d.data.txsHash)),receipts:[].concat(Object(Ge.a)(h.data.receipts),Object(Ge.a)(d.data.receipts))},error:[].concat(Object(Ge.a)(h.error),Object(Ge.a)(d.error))},restartPrototype:v,restartPrototypeLoading:d.loading}};function Wi(e){return r.a.createElement(Ct.a,Object.assign({elevation:6,variant:"filled"},e))}var qi=Object(wt.a)((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,margin:e.spacing(5.5,0),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),margin:e.spacing(5.5,0)},drawerClose:{transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(3.5),margin:e.spacing(5.5,0),"& div.MuiListItemIcon-root":{marginRight:e.spacing(0)}},toolbar:Object(Ue.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),listItem:{"& > div.MuiListItemIcon-root":{marginRight:e.spacing(1),minWidth:e.spacing(1.5)}},content:{flexGrow:1,padding:e.spacing(3)}}})),Ki=function(){var e,t,a=qi(),i=Object(It.a)(),s=Object(n.useState)(!1),o=Object(ae.a)(s,2),c=o[0],l=o[1],u=Object(n.useState)(!1),d=Object(ae.a)(u,2),f=d[0],m=d[1],b=Object(n.useState)(""),p=Object(ae.a)(b,2),g=p[0],y=p[1],h=Object(n.useState)("success"),v=Object(ae.a)(h,2),k=v[0],E=v[1],T=Object(n.useState)(null),j=Object(ae.a)(T,2),O=j[0],S=j[1],A=Object(n.useRef)(!0),w=Ne(),I=w.modelName,C=w.modelDisplayName,_=w.setModel,x=w.modelContractInstance,R=nt(),N=R.tasks,M=(R.refetch,tt()),D=M.users,U=M.refetch;function B(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e4;E(t),y(e),S(a)}var F=Hi(B),L=F.startManager,z=F.stopManager,P=F.managerRunning,H=F.jobs,W=F.txsRecord,q=F.restartPrototype,K=F.restartPrototypeLoading,V=_e.map((function(e){return{value:e.name,label:e.displayName}}));Object(n.useEffect)((function(){f&&m(!1),""!==g&&m(!0)}),[g]),Object(n.useEffect)((function(){K||A.current?A.current=!1:B("Prototype restart successfuly completed","success")}),[K]),Object(n.useEffect)((function(){console.log("Refetching users"),U()}),[N]);var $=function(e,t){"clickaway"!==t&&m(!1)};function Z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;y(e),E("info"),S(t)}return r.a.createElement(La,{className:a.root},r.a.createElement(Nt.a,{position:"fixed",className:Object(Sa.a)(a.appBar,Object(Le.a)({},a.appBarShift,c))},r.a.createElement(xr.a,null,r.a.createElement(Gt.a,{color:"inherit","aria-label":"open drawer",onClick:function(){l(!0)},edge:"start",className:Object(Sa.a)(a.menuButton,Object(Le.a)({},a.hide,c))},r.a.createElement(Lr.a,null)),r.a.createElement(Ut.a,{variant:"h6",noWrap:!0},"Administration Panel"))),r.a.createElement(Rr.a,{variant:"permanent",className:Object(Sa.a)(a.drawer,(e={},Object(Le.a)(e,a.drawerOpen,c),Object(Le.a)(e,a.drawerClose,!c),e)),classes:{paper:Object(Sa.a)((t={},Object(Le.a)(t,a.drawerOpen,c),Object(Le.a)(t,a.drawerClose,!c),t))}},r.a.createElement("div",{className:a.toolbar},r.a.createElement(Gt.a,{onClick:function(){l(!1)}},"rtl"===i.direction?r.a.createElement(Wr.a,null):r.a.createElement(Pr.a,null))),r.a.createElement(Nr.a,null),r.a.createElement(Mr.a,null,r.a.createElement(Dr.a,{className:a.listItem,button:!0,key:"StartManager",disabled:!x||P||K},r.a.createElement(Ur.a,{onClick:function(){Z("Starting manager, this takes some minutes to complete. Please wait...");try{L(N),B("Manager started successfuly!","success")}catch(e){B("Start manager failed","error"),console.log(e)}}},r.a.createElement(Ga.a,null)),r.a.createElement(Br.a,{primary:"Start Manager"})),r.a.createElement(Dr.a,{className:a.listItem,button:!0,key:"StopManager",disabled:!P||K},r.a.createElement(Ur.a,{onClick:function(){Z("Stopping manager. Please wait...");try{z(),B("Manager stopped successfuly!","success")}catch(e){B("Stop manager failed","error"),console.log(e)}}},r.a.createElement(Si.a,null)),r.a.createElement(Br.a,{primary:"Stop Manager"})),r.a.createElement(Dr.a,{className:a.listItem,button:!0,key:"RestartContract",disabled:!x||P||K},r.a.createElement(Ur.a,{onClick:function(){Z("Restarting prototype, this takes some minutes to complete. You can check the state of transactions in the table. Please wait...");try{q()}catch(e){B("Restart prototype failed","error"),console.log(e)}}},r.a.createElement(Kr.a,null)),r.a.createElement(Br.a,{primary:"Restart Contract"})))),r.a.createElement("main",{className:a.content},r.a.createElement(jt.a,{container:!0,spacing:2},r.a.createElement(jt.a,{item:!0,lg:6},r.a.createElement(Ut.a,{variant:"h3"},C)),r.a.createElement(jt.a,{item:!0,lg:6},r.a.createElement(jt.a,{container:!0,justify:"flex-end",alignItems:"center",spacing:2},r.a.createElement(jt.a,{item:!0},r.a.createElement(Ut.a,{variant:"h6"},"Change model:")),r.a.createElement(jt.a,{item:!0},r.a.createElement(Yr,{name:"model",label:"model",value:I,options:V,onChange:function(e){return _(e.target.value)}})))),r.a.createElement(jt.a,{item:!0,lg:6},r.a.createElement(jt.a,{container:!0,justify:"space-between",spacing:2},r.a.createElement(jt.a,{item:!0},r.a.createElement(Ut.a,{variant:"h6"},"Manager ")),r.a.createElement(jt.a,{item:!0},r.a.createElement(Ka.a,{icon:P?r.a.createElement(wi.a,null):r.a.createElement(Ci.a,null),label:P?"On":"Off",color:P?"primary":"secondary",style:{marginBottom:"1rem"}}))),r.a.createElement(Ni,{jobs:Object(Ge.a)(H).map((function(e){var t=Object(ae.a)(e,2),a=(t[0],t[1]);return{id:a.timerId,taskId:a.taskId,endDate:a.endDate,status:a.endDate>Date.now()?"waiting":"timed out"}}))})),r.a.createElement(jt.a,{item:!0,lg:6}),r.a.createElement(jt.a,{item:!0,lg:6},r.a.createElement(Ut.a,{variant:"h6"},"Registered users"),r.a.createElement(di,{users:D&&N?D.map((function(e){var t=N.filter((function(t){return t.assignee&&t.assignee.id===e.id&&t.status===Gn[Zn.Accepted]}));return{id:e.id,hasTask:!e.available,taskId:t[0]?t[0].id:null}})):null})),r.a.createElement(jt.a,{item:!0,lg:6},r.a.createElement(Ut.a,{variant:"h6"},"Tasks"),r.a.createElement(Bi,{tasks:N?N.map((function(e){return{id:e.id,status:e.status,userId:e.assignee?e.assignee.id:null,endDate:1e3*e.endDate}})):null})),r.a.createElement(jt.a,{item:!0,lg:12},r.a.createElement(Ut.a,{variant:"h6"},"Transactions"),r.a.createElement(bi,{txs:W.data?W.data.receipts:{}})))),r.a.createElement(St.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:f,onClose:$,onExited:function(){y(""),m(!1)},autoHideDuration:O,style:{maxWidth:"30rem"}},r.a.createElement(Wi,{onClose:$,severity:k},g)))},Vi=a(450),$i=a.n(Vi),Zi=Object(wt.a)((function(e){return{root:{backgroundColor:e.palette.background.green,color:"#fff"},mainContainer:{border:"none"}}})),Gi=function(e){var t=e.className,a=e.children,n=Zi(),i=n.root,s=n.mainContainer;return r.a.createElement("div",{className:i},r.a.createElement(Rt.a,{maxWidth:"xl"},r.a.createElement(Ot.a,{className:Object(Sa.a)(t,s)},a)),r.a.createElement(Ia,null))},Yi=Object(wt.a)((function(e){return{root:{height:"calc(100vh - 100px)","& h2":{marginBottom:e.spacing(4)}},select:{"& label, span, div, svg":{color:"#fff"}},button:{color:"#fff"}}})),Xi=function(e){return r.a.createElement(Tt.a,Object.assign({},e,{direction:"left"}))},Qi=function(){var e=Yi(),t=e.root,a=e.select,i=e.button,s=Object(De.g)(),o=tt().users,c=Object(n.useState)(""),l=Object(ae.a)(c,2),u=l[0],d=l[1],f=Object(n.useState)(),m=Object(ae.a)(f,2),b=m[0],p=m[1],g=Object(n.useState)(""),y=Object(ae.a)(g,2),h=y[0],v=y[1],k=Object(n.useState)(!1),E=Object(ae.a)(k,2),T=E[0],j=E[1],O=_e.map((function(e){return{value:e.name,label:e.displayName}}));return Object(n.useEffect)((function(){o&&(p(o.map((function(e){return{value:e.id,label:e.id}}))),d(o[0].id))}),[o]),Object(n.useEffect)((function(){_e&&v(_e[0].name)}),[_e]),r.a.createElement(Gi,null,r.a.createElement(jt.a,{container:!0,justify:"flex-start",alignContent:"center",alignItems:"center",spacing:2,className:t},r.a.createElement(jt.a,{item:!0,lg:12},r.a.createElement(Ut.a,{variant:"h2"},"Welcome to the task allocation prototype!"),r.a.createElement(Ut.a,{variant:"h6"},"Let's"," ",r.a.createElement("b",null,r.a.createElement("u",null,"configure"))," ","what model you want to test and choose a user:")),r.a.createElement(jt.a,{item:!0,lg:12},r.a.createElement(jt.a,{container:!0,spacing:4},O?r.a.createElement(jt.a,{item:!0},r.a.createElement(jt.a,{container:!0,alignItems:"center",spacing:2},r.a.createElement(jt.a,{item:!0},r.a.createElement(Ut.a,{variant:"h6"},"Model")),r.a.createElement(jt.a,{item:!0},r.a.createElement(Yr,{name:"model",label:"model",value:h,options:O,className:a,onChange:function(e){return v(e.target.value)}})))):null,b?r.a.createElement(jt.a,{item:!0},r.a.createElement(jt.a,{container:!0,alignItems:"center",spacing:2},r.a.createElement(jt.a,{item:!0},r.a.createElement(Ut.a,{variant:"h6"},"User")),r.a.createElement(jt.a,{item:!0},r.a.createElement(Yr,{name:"user",label:"User",value:u,options:b,className:a,onChange:function(e){return d(e.target.value)}})))):null)),r.a.createElement(jt.a,{item:!0,lg:12},r.a.createElement(jt.a,{container:!0,spacing:1},r.a.createElement(jt.a,{item:!0},r.a.createElement(Vt.a,{variant:"outlined",className:i,onClick:function(){var e=Ze(window.location.origin+"/home/",[{key:"userId",value:u},{key:"model",value:h}]);navigator.clipboard.writeText(e),j(!0)}},r.a.createElement($i.a,null)," Copy link")),r.a.createElement(jt.a,{item:!0},r.a.createElement(Vt.a,{variant:"outlined",className:i,onClick:function(){return s.push(Ze("/home/",[{key:"userId",value:u},{key:"model",value:h}]))}},"Access"))))),r.a.createElement(St.a,{open:T,anchorOrigin:{vertical:"bottom",horizontal:"right"},TransitionComponent:Xi,transitionDuration:500,autoHideDuration:3e3,onClose:function(e,t){"clickaway"!==t&&j(!1)},key:"bottomright"},r.a.createElement(Ct.a,{severity:"info"},"Custom link copied to clipboard!")))};var Ji=function(){var e,t;switch(Ne().modelName){case _e[0].name:e=$n,t=ji;break;case _e[1].name:e=lr,t=Ki;break;case _e[2].name:e=_r,t=Ki;break;default:e=$n}return r.a.createElement(De.d,null,r.a.createElement(De.a,{exact:!0,from:"/",to:"/config"}),r.a.createElement(De.b,{path:"/config",component:Qi}),r.a.createElement(De.b,{path:"/home",component:e}),r.a.createElement(De.b,{path:"/admin",component:t}))};function es(e){return new d.a(e)}var ts=function(){return r.a.createElement(n.Suspense,{fallback:"loading"},r.a.createElement(f.b,{getLibrary:es},r.a.createElement(X,null,r.a.createElement(Re,null,r.a.createElement(Me,null,r.a.createElement(c.a,{theme:P},r.a.createElement(l.a,null),r.a.createElement(o.a,null,r.a.createElement(Ji,null))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(ts,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[478,1,2]]]);
//# sourceMappingURL=main.22a082c7.chunk.js.map